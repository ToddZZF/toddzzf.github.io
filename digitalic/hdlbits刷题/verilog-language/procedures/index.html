<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Always Blocks(Combinational) For synthesizing hardware, two types of always blocks are relevant: Combinational: always @(*) Clocked: always @(posedge clk) Combinational always blocks are equivalent to assign statements, å“ªä¸ªæ–¹ä¾¿ç”¨å“ªä¸ªã€‚ä½†æ˜¯ï¼Œ procedural block é‡Œé¢çš„è¯­å¥æœ‰ä¸€äº›ä¸åŒã€‚Procedural blocks å¯ä»¥ç”¨ if-th"><title>Procedures</title><link rel=canonical href=https://todd.scuteee.com/digitalic/hdlbits%E5%88%B7%E9%A2%98/verilog-language/procedures/><link rel=stylesheet href=/scss/style.min.7fb5a1f08f67e3bdcc6696b335c3102ad72b845106e61a71cd0402e10b5f22de.css><meta property="og:title" content="Procedures"><meta property="og:description" content="Always Blocks(Combinational) For synthesizing hardware, two types of always blocks are relevant: Combinational: always @(*) Clocked: always @(posedge clk) Combinational always blocks are equivalent to assign statements, å“ªä¸ªæ–¹ä¾¿ç”¨å“ªä¸ªã€‚ä½†æ˜¯ï¼Œ procedural block é‡Œé¢çš„è¯­å¥æœ‰ä¸€äº›ä¸åŒã€‚Procedural blocks å¯ä»¥ç”¨ if-th"><meta property="og:url" content="https://todd.scuteee.com/digitalic/hdlbits%E5%88%B7%E9%A2%98/verilog-language/procedures/"><meta property="og:site_name" content="Todd's Blog"><meta property="og:type" content="article"><meta property="article:section" content="DigitalIC"><meta property="article:published_time" content="2022-11-18T13:36:00+08:00"><meta property="article:modified_time" content="2022-11-18T13:36:00+08:00"><meta name=twitter:title content="Procedures"><meta name=twitter:description content="Always Blocks(Combinational) For synthesizing hardware, two types of always blocks are relevant: Combinational: always @(*) Clocked: always @(posedge clk) Combinational always blocks are equivalent to assign statements, å“ªä¸ªæ–¹ä¾¿ç”¨å“ªä¸ªã€‚ä½†æ˜¯ï¼Œ procedural block é‡Œé¢çš„è¯­å¥æœ‰ä¸€äº›ä¸åŒã€‚Procedural blocks å¯ä»¥ç”¨ if-th"><link rel="shortcut icon" href=favicon.png></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ¢èœå•>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/avatar_huab97f25f655a875cd3229d10d376a5bb_18063_300x0_resize_box_3.png width=300 height=300 class=site-logo loading=lazy alt=Avatar></a>
<span class=emoji>ğŸ’˜</span></figure><div class=site-meta><h1 class=site-name><a href=/>Todd's Blog</a></h1><h2 class=site-description>Life & Work</h2></div></header><ol class=social-menu><li><a href=https://github.com/toddzzf target=_blank title=GitHub><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/posts/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>æ—¥å¸¸</span></a></li><li><a href=/food/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-tools-kitchen-2" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19 3v12h-5c-.023-3.681.184-7.406 5-12zm0 12v6h-1v-3M8 4v17M5 4v3a3 3 0 106 0V4"/></svg><span>åƒçš„</span></a></li><li><a href=/design/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-code" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><polyline points="7 8 3 12 7 16"/><polyline points="17 8 21 12 17 16"/><line x1="14" y1="4" x2="10" y2="20"/></svg><span>ç½‘é¡µè®¾è®¡</span></a></li><li><a href=/ppt/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-presentation" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><line x1="3" y1="4" x2="21" y2="4"/><path d="M4 4v10a2 2 0 002 2h12a2 2 0 002-2V4"/><line x1="12" y1="16" x2="12" y2="20"/><line x1="9" y1="20" x2="15" y2="20"/><path d="M8 12l3-3 2 2 3-3"/></svg><span>PPT</span></a></li><li class=current><a href=/digitalic/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-circuit-diode" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 12h-6"/><path d="M2 12h6"/><path d="M8 7l8 5-8 5z"/><path d="M16 7v10"/></svg><span>Digital IC</span></a></li><li><a href=/analogic/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-circuit-diode" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 12h-6"/><path d="M2 12h6"/><path d="M8 7l8 5-8 5z"/><path d="M16 7v10"/></svg><span>Analog IC</span></a></li><li><a href=/analog/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-circuit-diode" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 12h-6"/><path d="M2 12h6"/><path d="M8 7l8 5-8 5z"/><path d="M16 7v10"/></svg><span>æ¨¡æ‹Ÿç”µå­æŠ€æœ¯</span></a></li><div class=menu-bottom-section><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>æš—è‰²æ¨¡å¼</span></li></div></ol></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><div class=article-title-wrapper><h2 class=article-title><a href=/digitalic/hdlbits%E5%88%B7%E9%A2%98/verilog-language/procedures/>Procedures</a></h2></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>Nov 18, 2022</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>é˜…è¯»æ—¶é•¿: 5 åˆ†é’Ÿ</time></div></footer></div></header><section class=article-content><h2 id=always-blockscombinational>Always Blocks(Combinational)</h2><p>For synthesizing hardware, two types of always blocks are relevant:</p><ul><li><code>Combinational: always @(*)</code></li><li><code>Clocked: always @(posedge clk)</code></li></ul><p>Combinational always blocks are equivalent to assign statements, å“ªä¸ªæ–¹ä¾¿ç”¨å“ªä¸ªã€‚ä½†æ˜¯ï¼Œ procedural block é‡Œé¢çš„è¯­å¥æœ‰ä¸€äº›ä¸åŒã€‚Procedural blocks å¯ä»¥ç”¨ <code>if-then</code>ã€<code>case</code> ç­‰è¯­å¥ï¼Œä½†ä¸èƒ½åŒ…å«è¿ç»­èµ‹å€¼ï¼ˆProcedural continuous assignments æ— æ³•ç»¼åˆï¼‰ã€‚</p><p>æ¯”å¦‚ï¼Œä¸‹é¢ä¸¤ä¸ªä¼šç”ŸæˆåŒæ ·çš„ç»„åˆé€»è¾‘ï¼š</p><ul><li><code>assign out1 = a & b | c ^ d;</code></li><li><code>always @(*) out2 = a & b | c ^ d;</code></li></ul><p>combinational alwaysçš„æ•æ„Ÿè¡¨æ˜¯ <code>(*)</code>ï¼Œè¡¨ç¤ºåœ¨alwayså†…éƒ¨æ‰€æœ‰å‡ºç°çš„ä¿¡å·ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰‹åŠ¨åˆ—ä¿¡å·ï¼Œä½†ä¸€æ—¦æ¼äº†ä¿¡å·ï¼Œé‚£ä¹ˆï¼šthe synthesized hardware will still behave as though (*) was specified, but the simulation will not and not match the hardware&rsquo;s behaviour.</p><p>æ³¨æ„ï¼š<code>assign</code> ç­‰å·çš„å·¦è¾¹å¿…é¡»æ˜¯ä¸€ä¸ª net type(e.g., wire)ï¼Œè€Œ procedural assignment çš„ç­‰å·çš„å·¦è¾¹å¿…é¡»æ˜¯ variable type(e.g., reg).</p><h3 id=é—®é¢˜30>é—®é¢˜30</h3><ul><li>é¢˜ç›®ï¼šåˆ†åˆ«ç”¨ç»„åˆé€»è¾‘ä¸æ—¶åºé€»è¾‘å®ç°ä¸€ä¸ªä¸é—¨ï¼š</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-verilog data-lang=verilog><span class=line><span class=cl><span class=c1>// synthesis verilog_input_version verilog_2001
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>module</span> <span class=n>top_module</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=k>input</span> <span class=n>a</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=k>input</span> <span class=n>b</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=k>output</span> <span class=kt>wire</span> <span class=n>out_assign</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=k>output</span> <span class=kt>reg</span> <span class=n>out_alwaysblock</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>assign</span> <span class=n>out_assign</span> <span class=o>=</span> <span class=n>a</span><span class=o>&amp;</span><span class=n>b</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>always</span> <span class=p>@(</span><span class=o>*</span><span class=p>)</span> <span class=n>out_alwaysblock</span> <span class=o>=</span> <span class=n>a</span><span class=o>&amp;</span><span class=n>b</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>endmodule</span>
</span></span></code></pre></td></tr></table></div></div><p><img src=/digitalic/hdlbits%E5%88%B7%E9%A2%98/verilog-language/procedures/images/%E9%97%AE%E9%A2%9830-testbench.png width=546 height=332 srcset="/digitalic/hdlbits%E5%88%B7%E9%A2%98/verilog-language/procedures/images/%E9%97%AE%E9%A2%9830-testbench_hu25646ae2b401f54cd0deda34252bb23a_13863_480x0_resize_box_3.png 480w, /digitalic/hdlbits%E5%88%B7%E9%A2%98/verilog-language/procedures/images/%E9%97%AE%E9%A2%9830-testbench_hu25646ae2b401f54cd0deda34252bb23a_13863_1024x0_resize_box_3.png 1024w" loading=lazy alt=é—®é¢˜30-testbench class=gallery-image data-flex-grow=164 data-flex-basis=394px></p><h2 id=always-blocksclocked>Always Blocks(clocked)</h2><p>For hardware synthesis, there are two types of always blocks that are relevant:</p><ul><li>Combinational: <code>always @(*)</code></li><li>Clocked: <code>always @(posedge clk)</code></li></ul><h3 id=blocking-vs-non-blocking-assignment>Blocking vs. Non-Blocking Assignment</h3><p>There are three types of assignments in Verilog:</p><ul><li>Continuous assignments (<code>assign x = y;</code>). Can only be used when not inside a procedure (&ldquo;always block&rdquo;).</li><li>Procedural blocking assignment: (<code>x = y;</code>). Can only be used inside a procedure.</li><li>Procedural non-blocking assignment: (<code>x &lt;= y;</code>). Can only be used inside a procedure.</li></ul><p>In a combinational always block, use blocking assignments. In a clocked always block, use non-blocking assignments.</p><h3 id=é—®é¢˜31>é—®é¢˜31</h3><ul><li>é¢˜ç›®ï¼šç”¨ä¸‰ç§èµ‹å€¼æ–¹æ³•å®ç° xor</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-verilog data-lang=verilog><span class=line><span class=cl><span class=c1>// synthesis verilog_input_version verilog_2001
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>module</span> <span class=n>top_module</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=k>input</span> <span class=n>clk</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=k>input</span> <span class=n>a</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=k>input</span> <span class=n>b</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=k>output</span> <span class=kt>wire</span> <span class=n>out_assign</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=k>output</span> <span class=kt>reg</span> <span class=n>out_always_comb</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=k>output</span> <span class=kt>reg</span> <span class=n>out_always_ff</span>   <span class=p>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>assign</span> <span class=n>out_assign</span> <span class=o>=</span> <span class=n>a</span><span class=o>^</span><span class=n>b</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>always</span> <span class=p>@(</span><span class=o>*</span><span class=p>)</span> <span class=n>out_always_comb</span> <span class=o>=</span> <span class=n>a</span><span class=o>^</span><span class=n>b</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>always</span> <span class=p>@(</span><span class=k>posedge</span> <span class=n>clk</span><span class=p>)</span> <span class=n>out_always_ff</span> <span class=o>&lt;=</span> <span class=n>a</span><span class=o>^</span><span class=n>b</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>endmodule</span>
</span></span></code></pre></td></tr></table></div></div><p><img src=/digitalic/hdlbits%E5%88%B7%E9%A2%98/verilog-language/procedures/images/%E9%97%AE%E9%A2%9831-testbench.png width=552 height=417 srcset="/digitalic/hdlbits%E5%88%B7%E9%A2%98/verilog-language/procedures/images/%E9%97%AE%E9%A2%9831-testbench_hu2a859df688033ad185e15f7196dcdeeb_17677_480x0_resize_box_3.png 480w, /digitalic/hdlbits%E5%88%B7%E9%A2%98/verilog-language/procedures/images/%E9%97%AE%E9%A2%9831-testbench_hu2a859df688033ad185e15f7196dcdeeb_17677_1024x0_resize_box_3.png 1024w" loading=lazy alt=é—®é¢˜31-testbench class=gallery-image data-flex-grow=132 data-flex-basis=317px></p><h2 id=if-statement>If Statement</h2><p>if statement å¯ä»¥ç”¨æ¥å¼„2-1é€‰æ‹©å™¨ï¼š</p><p><img src=/digitalic/hdlbits%E5%88%B7%E9%A2%98/verilog-language/procedures/images/Always_if_mux.png width=207 height=117 srcset="/digitalic/hdlbits%E5%88%B7%E9%A2%98/verilog-language/procedures/images/Always_if_mux_hu82fa104dedda6028f82c3a8f25c3a352_3790_480x0_resize_box_3.png 480w, /digitalic/hdlbits%E5%88%B7%E9%A2%98/verilog-language/procedures/images/Always_if_mux_hu82fa104dedda6028f82c3a8f25c3a352_3790_1024x0_resize_box_3.png 1024w" loading=lazy alt=Always_if_mux class=gallery-image data-flex-grow=176 data-flex-basis=424px></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-verilog data-lang=verilog><span class=line><span class=cl><span class=n>Always</span> <span class=k>if</span> <span class=n>mux</span><span class=p>.</span><span class=n>png</span>
</span></span><span class=line><span class=cl><span class=k>always</span> <span class=p>@(</span><span class=o>*</span><span class=p>)</span> <span class=k>begin</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>condition</span><span class=p>)</span> <span class=k>begin</span>
</span></span><span class=line><span class=cl>        <span class=n>out</span> <span class=o>=</span> <span class=n>x</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>end</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span> <span class=k>begin</span>
</span></span><span class=line><span class=cl>        <span class=n>out</span> <span class=o>=</span> <span class=n>y</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>end</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span></code></pre></td></tr></table></div></div><p>ç­‰ä»·äºï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-verilog data-lang=verilog><span class=line><span class=cl><span class=k>assign</span> <span class=n>out</span> <span class=o>=</span> <span class=p>(</span><span class=n>condition</span><span class=p>)</span> <span class=o>?</span> <span class=n>x</span> <span class=o>:</span> <span class=n>y</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p>However, the procedural if statement provides a new way to make mistakes. <strong>The circuit is combinational only if out is always assigned a value.</strong></p><h3 id=é—®é¢˜32>é—®é¢˜32</h3><ul><li>é¢˜ç›®ï¼šBuild a 2-to-1 mux that chooses between a and b. Choose b if both sel_b1 and sel_b2 are true. Otherwise, choose a. Do the same twice, once using assign statements and once using a procedural if statement.</li></ul><div class=table-wrapper><table><thead><tr><th>sel_b1</th><th>sel_b2</th><th>out</th></tr></thead><tbody><tr><td>0</td><td>0</td><td>a</td></tr><tr><td>0</td><td>1</td><td>a</td></tr><tr><td>1</td><td>0</td><td>a</td></tr><tr><td>1</td><td>1</td><td>b</td></tr></tbody></table></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-verilog data-lang=verilog><span class=line><span class=cl><span class=c1>// synthesis verilog_input_version verilog_2001
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>module</span> <span class=n>top_module</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=k>input</span> <span class=n>a</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=k>input</span> <span class=n>b</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=k>input</span> <span class=n>sel_b1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=k>input</span> <span class=n>sel_b2</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=k>output</span> <span class=kt>wire</span> <span class=n>out_assign</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=k>output</span> <span class=kt>reg</span> <span class=n>out_always</span>   <span class=p>);</span> 
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>//assign out_assign = a&amp;~(sel_b1&amp;sel_b2) | b&amp;(sel_b1&amp;sel_b2);
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>assign</span> <span class=n>out_assign</span> <span class=o>=</span> <span class=p>(</span><span class=n>sel_b1</span><span class=o>&amp;</span><span class=n>sel_b2</span><span class=p>)</span> <span class=o>?</span> <span class=n>b</span> <span class=o>:</span> <span class=n>a</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>always</span> <span class=p>@(</span><span class=o>*</span><span class=p>)</span> <span class=k>begin</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>sel_b1</span> <span class=o>&amp;</span> <span class=n>sel_b2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>out_always</span> <span class=o>=</span> <span class=n>b</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span>
</span></span><span class=line><span class=cl>            <span class=n>out_always</span> <span class=o>=</span> <span class=n>a</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>endmodule</span>
</span></span></code></pre></td></tr></table></div></div><p><img src=/digitalic/hdlbits%E5%88%B7%E9%A2%98/verilog-language/procedures/images/%E9%97%AE%E9%A2%9832-testbench.png width=596 height=387 srcset="/digitalic/hdlbits%E5%88%B7%E9%A2%98/verilog-language/procedures/images/%E9%97%AE%E9%A2%9832-testbench_hu4997b3c78685765a2afccc2564d9dfcd_15821_480x0_resize_box_3.png 480w, /digitalic/hdlbits%E5%88%B7%E9%A2%98/verilog-language/procedures/images/%E9%97%AE%E9%A2%9832-testbench_hu4997b3c78685765a2afccc2564d9dfcd_15821_1024x0_resize_box_3.png 1024w" loading=lazy alt=é—®é¢˜32-testbench class=gallery-image data-flex-grow=154 data-flex-basis=369px></p><h2 id=if-statement-latches>If Statement Latches</h2><h3 id=a-common-source-of-errors-how-to-avoid-making-latches>A common source of errors: How to avoid making latches</h3><p>å¦‚æœæ²¡æœ‰æŒ‡å®šæŸäº›æƒ…å†µï¼Œé‚£ä¹ˆ Verilog å°±ä¼šè®¤ä¸ºåœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œè¾“å‡ºä¸å˜ã€‚è€Œè¿™å°±ä¼šå¼•å…¥ Latch. æ³¨æ„ç¼–è¯‘æ—¶çš„ Warning (10240): &mldr; inferring latch(es)" messages. é™¤éä½ éœ€è¦é‚£ä¸ªlatchï¼Œå¦åˆ™è¿™æ„å‘³ç€å­˜åœ¨ä¸€ä¸ªbug. Combinational circuits must have a value assigned to all outputs under all conditions. This usually means you always need else clauses or a default value assigned to the outputs.</p><h3 id=demonstration-é—®é¢˜33>Demonstration (é—®é¢˜33)</h3><ul><li>é¢˜ç›®ï¼šThe following code contains incorrect behaviour that creates a latch. Fix the bugs so that you will shut off the computer only if it&rsquo;s really overheated, and stop driving if you&rsquo;ve arrived at your destination or you need to refuel.</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-verilog data-lang=verilog><span class=line><span class=cl><span class=k>always</span> <span class=p>@(</span><span class=o>*</span><span class=p>)</span> <span class=k>begin</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>cpu_overheated</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>shut_off_computer</span> <span class=o>=</span> <span class=mh>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>always</span> <span class=p>@(</span><span class=o>*</span><span class=p>)</span> <span class=k>begin</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=o>~</span><span class=n>arrived</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>keep_driving</span> <span class=o>=</span> <span class=o>~</span><span class=n>gas_tank_empty</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-verilog data-lang=verilog><span class=line><span class=cl><span class=c1>// synthesis verilog_input_version verilog_2001
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>module</span> <span class=n>top_module</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=k>input</span>      <span class=n>cpu_overheated</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=k>output</span> <span class=kt>reg</span> <span class=n>shut_off_computer</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=k>input</span>      <span class=n>arrived</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=k>input</span>      <span class=n>gas_tank_empty</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=k>output</span> <span class=kt>reg</span> <span class=n>keep_driving</span>  <span class=p>);</span> <span class=c1>//
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=k>always</span> <span class=p>@(</span><span class=o>*</span><span class=p>)</span> <span class=k>begin</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>cpu_overheated</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>shut_off_computer</span> <span class=o>=</span> <span class=mh>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span>
</span></span><span class=line><span class=cl>            <span class=n>shut_off_computer</span> <span class=o>=</span> <span class=mh>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>always</span> <span class=p>@(</span><span class=o>*</span><span class=p>)</span> <span class=k>begin</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=o>~</span><span class=n>arrived</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>keep_driving</span> <span class=o>=</span> <span class=o>~</span><span class=n>gas_tank_empty</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span>
</span></span><span class=line><span class=cl>            <span class=n>keep_driving</span> <span class=o>=</span> <span class=mh>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>endmodule</span>
</span></span></code></pre></td></tr></table></div></div><p><img src=/digitalic/hdlbits%E5%88%B7%E9%A2%98/verilog-language/procedures/images/%E9%97%AE%E9%A2%9833-testbench.png width=555 height=358 srcset="/digitalic/hdlbits%E5%88%B7%E9%A2%98/verilog-language/procedures/images/%E9%97%AE%E9%A2%9833-testbench_hucc2f302e188051e802d14cc2f6ff91e0_16687_480x0_resize_box_3.png 480w, /digitalic/hdlbits%E5%88%B7%E9%A2%98/verilog-language/procedures/images/%E9%97%AE%E9%A2%9833-testbench_hucc2f302e188051e802d14cc2f6ff91e0_16687_1024x0_resize_box_3.png 1024w" loading=lazy alt=é—®é¢˜33-testbench class=gallery-image data-flex-grow=155 data-flex-basis=372px></p><h2 id=case-statement>Case Statement</h2><p>Case statements in Verilog are nearly equivalent to a sequence of if-elseif-else that compares one expression to a list of others.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-verilog data-lang=verilog><span class=line><span class=cl><span class=k>always</span> <span class=p>@(</span><span class=o>*</span><span class=p>)</span> <span class=k>begin</span>     <span class=c1>// This is a combinational circuit
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>case</span> <span class=p>(</span><span class=n>in</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=mh>1</span><span class=mb>&#39;b1</span><span class=o>:</span> <span class=k>begin</span> 
</span></span><span class=line><span class=cl>               <span class=n>out</span> <span class=o>=</span> <span class=mh>1</span><span class=mb>&#39;b1</span><span class=p>;</span>  <span class=c1>// begin-end if &gt;1 statement
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>end</span>
</span></span><span class=line><span class=cl>      <span class=mh>1</span><span class=mb>&#39;b0</span><span class=o>:</span> <span class=n>out</span> <span class=o>=</span> <span class=mh>1</span><span class=mb>&#39;b0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=k>default</span><span class=o>:</span> <span class=n>out</span> <span class=o>=</span> <span class=mh>1</span><span class=p>&#39;</span><span class=n>bx</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>endcase</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>Each case item can execute exactly one statement. This makes the &ldquo;break&rdquo; used in C unnecessary. But this means that if you need more than one statement, you must use <code>begin ... end</code>.</li><li>Duplicate (and partially overlapping) case items are permitted. The first one that matches is used. C does not allow duplicate case items.</li></ul><h3 id=é—®é¢˜34>é—®é¢˜34</h3><ul><li>é¢˜ç›®ï¼šCase statements are more convenient than if statements if there are a large number of cases. So, in this exercise, create a 6-to-1 multiplexer. When sel is between 0 and 5, choose the corresponding data input. Otherwise, output 0. The data inputs and outputs are all 4 bits wide.</li><li>æç¤ºï¼šBe careful of inferring latches</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-verilog data-lang=verilog><span class=line><span class=cl><span class=c1>// synthesis verilog_input_version verilog_2001
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>module</span> <span class=n>top_module</span> <span class=p>(</span> 
</span></span><span class=line><span class=cl>    <span class=k>input</span> <span class=p>[</span><span class=mh>2</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>sel</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=k>input</span> <span class=p>[</span><span class=mh>3</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>data0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=k>input</span> <span class=p>[</span><span class=mh>3</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>data1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=k>input</span> <span class=p>[</span><span class=mh>3</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>data2</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=k>input</span> <span class=p>[</span><span class=mh>3</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>data3</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=k>input</span> <span class=p>[</span><span class=mh>3</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>data4</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=k>input</span> <span class=p>[</span><span class=mh>3</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>data5</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=k>output</span> <span class=kt>reg</span> <span class=p>[</span><span class=mh>3</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>out</span>   <span class=p>);</span><span class=c1>//
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=k>always</span><span class=p>@(</span><span class=o>*</span><span class=p>)</span> <span class=k>begin</span>  <span class=c1>// This is a combinational circuit
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>case</span><span class=p>(</span><span class=n>sel</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=mh>0</span><span class=o>:</span> <span class=n>out</span> <span class=o>=</span> <span class=n>data0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=mh>1</span><span class=o>:</span> <span class=n>out</span> <span class=o>=</span> <span class=n>data1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=mh>2</span><span class=o>:</span> <span class=n>out</span> <span class=o>=</span> <span class=n>data2</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=mh>3</span><span class=o>:</span> <span class=n>out</span> <span class=o>=</span> <span class=n>data3</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=mh>4</span><span class=o>:</span> <span class=n>out</span> <span class=o>=</span> <span class=n>data4</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=mh>5</span><span class=o>:</span> <span class=n>out</span> <span class=o>=</span> <span class=n>data5</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=k>default</span><span class=o>:</span> <span class=n>out</span> <span class=o>=</span> <span class=mh>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>endcase</span>
</span></span><span class=line><span class=cl>    <span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>endmodule</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=priority-encoderé—®é¢˜35>Priority Encoderï¼ˆé—®é¢˜35ï¼‰</h2><ul><li><p>é¢˜ç›®ï¼šA priority encoder is a combinational circuit that, when given an input bit vector, outputs the position of the first 1 bit in the vector. For example, a 8-bit priority encoder given the input 8&rsquo;b10010000 would output 3&rsquo;d4, because bit[4] is first bit that is high.</p><p>Build a 4-bit priority encoder. For this problem, if none of the input bits are high (i.e., input is zero), output zero. Note that a 4-bit number has 16 possible combinations.</p></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-verilog data-lang=verilog><span class=line><span class=cl><span class=c1>// synthesis verilog_input_version verilog_2001
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>module</span> <span class=n>top_module</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=k>input</span> <span class=p>[</span><span class=mh>3</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>in</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=k>output</span> <span class=kt>reg</span> <span class=p>[</span><span class=mh>1</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>pos</span>  <span class=p>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>always</span> <span class=p>@(</span><span class=o>*</span><span class=p>)</span> <span class=k>begin</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span><span class=p>(</span><span class=n>in</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=mh>4</span><span class=mb>&#39;b0001</span><span class=o>:</span> <span class=n>pos</span> <span class=o>=</span> <span class=mh>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=mh>4</span><span class=mb>&#39;b0010</span><span class=o>:</span> <span class=n>pos</span> <span class=o>=</span> <span class=mh>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=mh>4</span><span class=mb>&#39;b0110</span><span class=o>:</span> <span class=n>pos</span> <span class=o>=</span> <span class=mh>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=mh>4</span><span class=mb>&#39;b1010</span><span class=o>:</span> <span class=n>pos</span> <span class=o>=</span> <span class=mh>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=mh>4</span><span class=mb>&#39;b1110</span><span class=o>:</span> <span class=n>pos</span> <span class=o>=</span> <span class=mh>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=mh>4</span><span class=mb>&#39;b0100</span><span class=o>:</span> <span class=n>pos</span> <span class=o>=</span> <span class=mh>2</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=mh>4</span><span class=mb>&#39;b1100</span><span class=o>:</span> <span class=n>pos</span> <span class=o>=</span> <span class=mh>2</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=mh>4</span><span class=mb>&#39;b1000</span><span class=o>:</span> <span class=n>pos</span> <span class=o>=</span> <span class=mh>3</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=k>default</span><span class=o>:</span> <span class=n>pos</span> <span class=o>=</span> <span class=mh>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>endcase</span>
</span></span><span class=line><span class=cl>    <span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>endmodule</span>
</span></span></code></pre></td></tr></table></div></div><p><img src=/digitalic/hdlbits%E5%88%B7%E9%A2%98/verilog-language/procedures/images/%E9%97%AE%E9%A2%9835-testbench.png width=936 height=237 srcset="/digitalic/hdlbits%E5%88%B7%E9%A2%98/verilog-language/procedures/images/%E9%97%AE%E9%A2%9835-testbench_hua6d11ce3e78734952cfdfac00540e64a_15352_480x0_resize_box_3.png 480w, /digitalic/hdlbits%E5%88%B7%E9%A2%98/verilog-language/procedures/images/%E9%97%AE%E9%A2%9835-testbench_hua6d11ce3e78734952cfdfac00540e64a_15352_1024x0_resize_box_3.png 1024w" loading=lazy alt=é—®é¢˜35-testbench class=gallery-image data-flex-grow=394 data-flex-basis=947px></p><h3 id=priority-encoder-with-casezé—®é¢˜36>Priority encoder with casezï¼ˆé—®é¢˜36ï¼‰</h3><p>å¯ä»¥åˆ©ç”¨ <code>casez</code> æ¥ç®€åŒ– priority encode. <code>casez</code> ä¼šæŠŠ <code>z</code> å½“ä½œæ— å…³ç´§è¦çš„å€¼ï¼Œæ¯”å¦‚ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-verilog data-lang=verilog><span class=line><span class=cl><span class=k>always</span> <span class=p>@(</span><span class=o>*</span><span class=p>)</span> <span class=k>begin</span>
</span></span><span class=line><span class=cl>    <span class=k>casez</span> <span class=p>(</span><span class=n>in</span><span class=p>[</span><span class=mh>3</span><span class=o>:</span><span class=mh>0</span><span class=p>])</span>
</span></span><span class=line><span class=cl>        <span class=mh>4</span><span class=p>&#39;</span><span class=nl>bzzz1:</span> <span class=n>out</span> <span class=o>=</span> <span class=mh>0</span><span class=p>;</span>   <span class=c1>// in[3:1] can be anything
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=mh>4</span><span class=p>&#39;</span><span class=nl>bzz1z:</span> <span class=n>out</span> <span class=o>=</span> <span class=mh>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=mh>4</span><span class=p>&#39;</span><span class=nl>bz1zz:</span> <span class=n>out</span> <span class=o>=</span> <span class=mh>2</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=mh>4</span><span class=mb>&#39;b1</span><span class=nl>zzz:</span> <span class=n>out</span> <span class=o>=</span> <span class=mh>3</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>default</span><span class=o>:</span> <span class=n>out</span> <span class=o>=</span> <span class=mh>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>endcase</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span></code></pre></td></tr></table></div></div><p>case statement ä¼šé€ä¸ªæ£€æŸ¥æ¯ä¸€é¡¹ï¼Œä¼šé€‰æ‹©ç¬¬ä¸€ä¸ªåŒ¹é…çš„é¡¹ã€‚</p><p>å¦å¤–è¿˜æœ‰ä¸€ä¸ª <code>casex</code> ä¼šæŠŠ <code>x</code> å’Œ <code>z</code> éƒ½çœ‹ä½œæ— å…³ç´§è¦çš„ã€‚å¦å¤–ï¼Œ<code>?</code> is a synonym for <code>z</code>.</p><ul><li>é¢˜ç›®ï¼šBuild a priority encoder for 8-bit inputs. Given an 8-bit vector, the output should report the first (least significant) bit in the vector that is 1. Report zero if the input vector has no bits that are high. For example, the input 8&rsquo;b10010000 should output 3&rsquo;d4, because bit[4] is first bit that is high.</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-verilog data-lang=verilog><span class=line><span class=cl><span class=c1>// synthesis verilog_input_version verilog_2001
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>module</span> <span class=n>top_module</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=k>input</span> <span class=p>[</span><span class=mh>7</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>in</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=k>output</span> <span class=kt>reg</span> <span class=p>[</span><span class=mh>2</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>pos</span> <span class=p>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>always</span> <span class=p>@(</span><span class=o>*</span><span class=p>)</span> <span class=k>begin</span>
</span></span><span class=line><span class=cl>        <span class=k>casex</span><span class=p>(</span><span class=n>in</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=mh>8</span><span class=p>&#39;</span><span class=nl>bxxxxxxx1:</span> <span class=n>pos</span> <span class=o>=</span> <span class=mh>3</span><span class=mi>&#39;d0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=mh>8</span><span class=p>&#39;</span><span class=nl>bxxxxxx1x:</span> <span class=n>pos</span> <span class=o>=</span> <span class=mh>3</span><span class=mi>&#39;d1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=mh>8</span><span class=p>&#39;</span><span class=nl>bxxxxx1xx:</span> <span class=n>pos</span> <span class=o>=</span> <span class=mh>3</span><span class=mi>&#39;d2</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=mh>8</span><span class=p>&#39;</span><span class=nl>bxxxx1xxx:</span> <span class=n>pos</span> <span class=o>=</span> <span class=mh>3</span><span class=mi>&#39;d3</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=mh>8</span><span class=p>&#39;</span><span class=nl>bxxx1xxxx:</span> <span class=n>pos</span> <span class=o>=</span> <span class=mh>3</span><span class=mi>&#39;d4</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=mh>8</span><span class=p>&#39;</span><span class=nl>bxx1xxxxx:</span> <span class=n>pos</span> <span class=o>=</span> <span class=mh>3</span><span class=mi>&#39;d5</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=mh>8</span><span class=p>&#39;</span><span class=nl>bx1xxxxx0:</span> <span class=n>pos</span> <span class=o>=</span> <span class=mh>3</span><span class=mi>&#39;d6</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=mh>8</span><span class=mb>&#39;b1</span><span class=nl>xxxxxx0:</span> <span class=n>pos</span> <span class=o>=</span> <span class=mh>3</span><span class=mi>&#39;d7</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=k>default</span><span class=o>:</span> <span class=n>pos</span> <span class=o>=</span> <span class=mh>3</span><span class=mi>&#39;d0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>endcase</span>
</span></span><span class=line><span class=cl>    <span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>endmodule</span>
</span></span></code></pre></td></tr></table></div></div><p><img src=/digitalic/hdlbits%E5%88%B7%E9%A2%98/verilog-language/procedures/images/%E9%97%AE%E9%A2%9836-testbench.png width=765 height=240 srcset="/digitalic/hdlbits%E5%88%B7%E9%A2%98/verilog-language/procedures/images/%E9%97%AE%E9%A2%9836-testbench_huac6c6fceacc0fb59e3935633fafe5a0c_15212_480x0_resize_box_3.png 480w, /digitalic/hdlbits%E5%88%B7%E9%A2%98/verilog-language/procedures/images/%E9%97%AE%E9%A2%9836-testbench_huac6c6fceacc0fb59e3935633fafe5a0c_15212_1024x0_resize_box_3.png 1024w" loading=lazy alt=é—®é¢˜36-testbench class=gallery-image data-flex-grow=318 data-flex-basis=765px></p><h2 id=avoiding-latchesé—®é¢˜37>Avoiding Latchesï¼ˆé—®é¢˜37ï¼‰</h2><p>å‡è®¾è¦æ‰«æé”®ç›˜çš„è¾“å…¥ï¼ˆå‡è®¾åªéœ€è¦æ‰«æä¸Šä¸‹å·¦å³4ä¸ªé”®ï¼‰ï¼Œå¦‚ä¸‹ï¼š</p><div class=table-wrapper><table><thead><tr><th>Scancode [15:0]</th><th>Arrow key</th></tr></thead><tbody><tr><td>16&rsquo;he06b</td><td>left arrow</td></tr><tr><td>16&rsquo;he072</td><td>down arrow</td></tr><tr><td>16&rsquo;he074</td><td>right arrow</td></tr><tr><td>16&rsquo;he075</td><td>up arrow</td></tr><tr><td>Anything else</td><td>none</td></tr></tbody></table></div><p>To avoid creating latches, all outputs must be assigned a value in all possible conditions. Simply having a default case is not enough. You must assign a value to all four outputs in all four cases and the default case.This can involve a lot of unnecessary typing. One easy way around this is to assign a &ldquo;default value&rdquo; to the outputs before the case statement:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-verilog data-lang=verilog><span class=line><span class=cl><span class=k>always</span> <span class=p>@(</span><span class=o>*</span><span class=p>)</span> <span class=k>begin</span>
</span></span><span class=line><span class=cl>    <span class=n>up</span> <span class=o>=</span> <span class=mh>1</span><span class=mb>&#39;b0</span><span class=p>;</span> <span class=n>down</span> <span class=o>=</span> <span class=mh>1</span><span class=mb>&#39;b0</span><span class=p>;</span> <span class=n>left</span> <span class=o>=</span> <span class=mh>1</span><span class=mb>&#39;b0</span><span class=p>;</span> <span class=n>right</span> <span class=o>=</span> <span class=mh>1</span><span class=mb>&#39;b0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>case</span> <span class=p>(</span><span class=n>scancode</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>...</span> <span class=c1>// Set to 1 as necessary.
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>endcase</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span></code></pre></td></tr></table></div></div><p>This style of code ensures the outputs are assigned a value (of 0) in all possible cases unless the case statement overrides the assignment. This also means that a default: case item becomes unnecessary.</p><p><strong>Reminder</strong>: The logic synthesizer generates a combinational circuit that behaves equivalently to what the code describes. Hardware does not &ldquo;execute&rdquo; the lines of code in sequence.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-verilog data-lang=verilog><span class=line><span class=cl><span class=c1>// synthesis verilog_input_version verilog_2001
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>module</span> <span class=n>top_module</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=k>input</span> <span class=p>[</span><span class=mh>15</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>scancode</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=k>output</span> <span class=kt>reg</span> <span class=n>left</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=k>output</span> <span class=kt>reg</span> <span class=n>down</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=k>output</span> <span class=kt>reg</span> <span class=n>right</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=k>output</span> <span class=kt>reg</span> <span class=n>up</span>  <span class=p>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>always</span> <span class=p>@(</span><span class=o>*</span><span class=p>)</span> <span class=k>begin</span>
</span></span><span class=line><span class=cl>        <span class=n>up</span> <span class=o>=</span> <span class=mh>1</span><span class=mb>&#39;b0</span><span class=p>;</span> <span class=n>down</span> <span class=o>=</span> <span class=mh>1</span><span class=mb>&#39;b0</span><span class=p>;</span> <span class=n>left</span> <span class=o>=</span> <span class=mh>1</span><span class=mb>&#39;b0</span><span class=p>;</span> <span class=n>right</span> <span class=o>=</span> <span class=mh>1</span><span class=mb>&#39;b0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span><span class=p>(</span><span class=n>scancode</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=mh>16&#39;he06b</span><span class=o>:</span> <span class=n>left</span> <span class=o>=</span> <span class=mh>1</span><span class=mb>&#39;b1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=mh>16&#39;he072</span><span class=o>:</span> <span class=n>down</span> <span class=o>=</span> <span class=mh>1</span><span class=mb>&#39;b1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=mh>16&#39;he074</span><span class=o>:</span> <span class=n>right</span> <span class=o>=</span> <span class=mh>1</span><span class=mb>&#39;b1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=mh>16&#39;he075</span><span class=o>:</span> <span class=n>up</span> <span class=o>=</span> <span class=mh>1</span><span class=mb>&#39;b1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>endcase</span>
</span></span><span class=line><span class=cl>    <span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>endmodule</span>
</span></span></code></pre></td></tr></table></div></div><p><img src=/digitalic/hdlbits%E5%88%B7%E9%A2%98/verilog-language/procedures/images/%E9%97%AE%E9%A2%9837-testbench.png width=834 height=423 srcset="/digitalic/hdlbits%E5%88%B7%E9%A2%98/verilog-language/procedures/images/%E9%97%AE%E9%A2%9837-testbench_huf066637dcf735b96d5313ab24660eda6_21555_480x0_resize_box_3.png 480w, /digitalic/hdlbits%E5%88%B7%E9%A2%98/verilog-language/procedures/images/%E9%97%AE%E9%A2%9837-testbench_huf066637dcf735b96d5313ab24660eda6_21555_1024x0_resize_box_3.png 1024w" loading=lazy alt=é—®é¢˜37-testbench class=gallery-image data-flex-grow=197 data-flex-basis=473px></p><p>ä¸‹é¢æ˜¯é”™è¯¯ç¤ºèŒƒã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-verilog data-lang=verilog><span class=line><span class=cl><span class=c1>// synthesis verilog_input_version verilog_2001
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>module</span> <span class=n>top_module</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=k>input</span> <span class=p>[</span><span class=mh>15</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>scancode</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=k>output</span> <span class=kt>reg</span> <span class=n>left</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=k>output</span> <span class=kt>reg</span> <span class=n>down</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=k>output</span> <span class=kt>reg</span> <span class=n>right</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=k>output</span> <span class=kt>reg</span> <span class=n>up</span>  <span class=p>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>always</span> <span class=p>@(</span><span class=o>*</span><span class=p>)</span> <span class=k>begin</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span><span class=p>(</span><span class=n>scancode</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=mh>16&#39;he06b</span><span class=o>:</span> <span class=n>left</span> <span class=o>=</span> <span class=mh>1</span><span class=mb>&#39;b1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=mh>16&#39;he072</span><span class=o>:</span> <span class=n>down</span> <span class=o>=</span> <span class=mh>1</span><span class=mb>&#39;b1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=mh>16&#39;he074</span><span class=o>:</span> <span class=n>right</span> <span class=o>=</span> <span class=mh>1</span><span class=mb>&#39;b1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=mh>16&#39;he075</span><span class=o>:</span> <span class=n>up</span> <span class=o>=</span> <span class=mh>1</span><span class=mb>&#39;b1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=k>default</span><span class=o>:</span> <span class=k>begin</span>
</span></span><span class=line><span class=cl>                <span class=n>up</span> <span class=o>=</span> <span class=mh>1</span><span class=mb>&#39;b0</span><span class=p>;</span> <span class=n>down</span> <span class=o>=</span> <span class=mh>1</span><span class=mb>&#39;b0</span><span class=p>;</span> <span class=n>left</span> <span class=o>=</span> <span class=mh>1</span><span class=mb>&#39;b0</span><span class=p>;</span> <span class=n>right</span> <span class=o>=</span> <span class=mh>1</span><span class=mb>&#39;b0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=k>end</span>
</span></span><span class=line><span class=cl>        <span class=k>endcase</span>
</span></span><span class=line><span class=cl>    <span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>endmodule</span>
</span></span></code></pre></td></tr></table></div></div><p><img src=/digitalic/hdlbits%E5%88%B7%E9%A2%98/verilog-language/procedures/images/%E9%97%AE%E9%A2%9837-wrong-testbench.png width=832 height=420 srcset="/digitalic/hdlbits%E5%88%B7%E9%A2%98/verilog-language/procedures/images/%E9%97%AE%E9%A2%9837-wrong-testbench_hufc3b0dba5bd7f50149f58d709d94dc16_21610_480x0_resize_box_3.png 480w, /digitalic/hdlbits%E5%88%B7%E9%A2%98/verilog-language/procedures/images/%E9%97%AE%E9%A2%9837-wrong-testbench_hufc3b0dba5bd7f50149f58d709d94dc16_21610_1024x0_resize_box_3.png 1024w" loading=lazy alt=é—®é¢˜37-wrong-testbench class=gallery-image data-flex-grow=198 data-flex-basis=475px></p></section><footer class=article-footer><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><footer class=site-footer><section class=copyright>&copy;
2020 -
2022 Todd's Blog</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>ä¸»é¢˜ <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.12.0>Stack</a></b> ç”± <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> è®¾è®¡</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">ç›®å½•</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#always-blockscombinational>Always Blocks(Combinational)</a><ol><li><a href=#é—®é¢˜30>é—®é¢˜30</a></li></ol></li><li><a href=#always-blocksclocked>Always Blocks(clocked)</a><ol><li><a href=#blocking-vs-non-blocking-assignment>Blocking vs. Non-Blocking Assignment</a></li><li><a href=#é—®é¢˜31>é—®é¢˜31</a></li></ol></li><li><a href=#if-statement>If Statement</a><ol><li><a href=#é—®é¢˜32>é—®é¢˜32</a></li></ol></li><li><a href=#if-statement-latches>If Statement Latches</a><ol><li><a href=#a-common-source-of-errors-how-to-avoid-making-latches>A common source of errors: How to avoid making latches</a></li><li><a href=#demonstration-é—®é¢˜33>Demonstration (é—®é¢˜33)</a></li></ol></li><li><a href=#case-statement>Case Statement</a><ol><li><a href=#é—®é¢˜34>é—®é¢˜34</a></li></ol></li><li><a href=#priority-encoderé—®é¢˜35>Priority Encoderï¼ˆé—®é¢˜35ï¼‰</a><ol><li><a href=#priority-encoder-with-casezé—®é¢˜36>Priority encoder with casezï¼ˆé—®é¢˜36ï¼‰</a></li></ol></li><li><a href=#avoiding-latchesé—®é¢˜37>Avoiding Latchesï¼ˆé—®é¢˜37ï¼‰</a></li></ol></nav></div></section></aside></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>