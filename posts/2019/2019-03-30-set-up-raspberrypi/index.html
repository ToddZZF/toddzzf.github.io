<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=pragma content="no-cache"><meta http-equiv=cache-control content="no-cache"><meta http-equiv=expires content="0"><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/lxgw-wenkai-lite-webfont@1.7.0/style.css><link rel=stylesheet href=/css/tailwindcss/output.css><link rel=stylesheet href=/css/mdstyle.css><script defer src=https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js></script>
<link href=https://cdn.bootcdn.net/ajax/libs/highlight.js/11.4.0/styles/github-dark-dimmed.min.css rel=stylesheet><script id=highlightjs src=https://cdn.bootcdn.net/ajax/libs/highlight.js/11.4.0/highlight.min.js async></script>
<script>document.getElementById("highlightjs").addEventListener("load",function(){hljs.highlightAll()})</script><title>树莓派初始配置及软件安装 - Todd's Blog</title></head><body class="font-kai bg-neutral-50 antialiased"><header class="w-full text-gray-700 bg-white dark-mode:text-gray-200 dark-mode:bg-gray-800 shadow-sm"><div x-data="{ open: false }" class="flex flex-col max-w-screen-xl px-4 mx-auto md:items-center md:justify-between md:flex-row md:px-6 lg:px-8"><div class="p-4 flex flex-row items-center justify-between"><a href=/ class="text-lg tracking-wider text-gray-900 uppercase rounded-lg dark-mode:text-white">Todd's Blog</a>
<button class="md:hidden rounded-lg focus:outline-none focus:drop-shadow-sm" @click="open = !open"><svg fill="currentcolor" viewBox="0 0 20 20" class="w-6 h-6"><path x-show="!open" fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4A1 1 0 013 5zm0 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm6 5a1 1 0 011-1h6a1 1 0 110 2h-6a1 1 0 01-1-1z" clip-rule="evenodd"/><path x-show="open" fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414.0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"/></svg></button></div><nav :class="{'flex': open, 'hidden': !open}" class="flex-col flex-grow pb-4 md:pb-0 hidden md:flex md:justify-end md:flex-row"><a class="px-4 py-2 mt-2 text-sm font-semibold text-gray-900 rounded-lg dark-mode:bg-gray-700 dark-mode:hover:bg-gray-600 dark-mode:focus:bg-gray-600 dark-mode:focus:text-white dark-mode:hover:text-white dark-mode:text-gray-200 md:mt-0 hover:text-gray-900 focus:text-gray-900 hover:bg-gray-200 focus:bg-gray-200 focus:outline-none focus:shadow-outline" href=/goodstuffs/>好物</a>
<a class="px-4 py-2 mt-2 text-sm font-semibold text-gray-900 rounded-lg dark-mode:bg-gray-700 dark-mode:hover:bg-gray-600 dark-mode:focus:bg-gray-600 dark-mode:focus:text-white dark-mode:hover:text-white dark-mode:text-gray-200 md:mt-0 hover:text-gray-900 focus:text-gray-900 hover:bg-gray-200 focus:bg-gray-200 focus:outline-none focus:shadow-outline" href=/posts/>日常</a></nav></div></header><main><div class="max-w-screen-lg w-full mx-auto py-8 px-4 flex flex-col gap-4"><div class="breadcrumb w-full bg-white py-2 px-4 shadow-sm"><ul class="flex align-baseline flex-wrap"><li class="after:content-['>'] after:mr-0.5 after:text-gray-300 whitespace-nowrap"><a href=http://example.org/>主页</a></li><li class="after:content-['>'] after:mr-0.5 after:text-gray-300 whitespace-nowrap"><a href=http://example.org/posts/>日常</a></li><li class="active whitespace-nowrap"><a href=http://example.org/posts/2019/2019-03-30-set-up-raspberrypi/>树莓派初始配置及软件安装</a></li></ul></div><div class="w-full mx-auto py-8"><div class="text-4xl font-semibold">树莓派初始配置及软件安装</div><div class="flex gap-2 text-sm flex-wrap"><span class=post-date>2019-03-30</span>
<a href=/posts/>📂日常</a></div></div><div class="mdstyle highlightjs"><blockquote><p>树莓派安装完系统后，总是需要设置一堆东西，然后还要安装各种软件，等等。而且我经常把树莓派玩坏&mldr;&mldr;重装系统是常有的事。我受够了每次都要上网查一堆资料，下面我将总结一下所有东西。</p></blockquote><h1 id=基本设置>基本设置</h1><h2 id=第一次开机>第一次开机</h2><p>  我的树莓派是3B/3B+，系统为<code>2018-11-13-raspbian-stretch.img</code>，就是带桌面但没那么多软件那个。烧录系统只需要10分钟。（最新的系统是<code>buster</code>，有些内容不兼容）</p><p>  第一次开机时间有点久。进入桌面后，先设置Country(China)，Language(Chinese)，Timezone(Shanghai)，勾选Use US keyboard。接着输入‘pi’用户新的密码。然后连接WiFi。不要更新软件，更新的话时间有点久，而且容易出错，跳过。</p><p>  重启。</p><p>  树莓派现在对中文支持较好，重启后并不会出现中文乱码。赞！</p><h2 id=换源更新>换源&更新</h2><h3 id=stretch>Stretch</h3><p>  众所周知，树莓派官方软件源在中国很慢，所以要换源。编辑软件源list文件：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>sudo nano /etc/apt/sources.list
</span></span></code></pre></div><p>  注释官方源，然后在下面选一个输进去：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1>#清华大学</span>
</span></span><span class=line><span class=cl>deb http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/ stretch main contrib non-free rpi
</span></span><span class=line><span class=cl>deb-src http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/ stretch main contrib non-free rpi
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#中国科技大学</span>
</span></span><span class=line><span class=cl>deb http://mirrors.ustc.edu.cn/raspbian/raspbian/ stretch main contrib non-free rpi
</span></span><span class=line><span class=cl>deb-src http://mirrors.ustc.edu.cn/raspbian/raspbian/ stretch main contrib non-free rpi
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#阿里云</span>
</span></span><span class=line><span class=cl>deb http://mirrors.aliyun.com/raspbian/raspbian/ stretch main contrib non-free rpi
</span></span><span class=line><span class=cl>deb-src http://mirrors.aliyun.com/raspbian/raspbian/ stretch main contrib non-free rpi
</span></span></code></pre></div><p>  修改系统更新源：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>sudo nano /etc/apt/sources.list.d/raspi.list
</span></span></code></pre></div><p>  同样，注释掉官方源，换成下面这个：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1>#中国科技大学</span>
</span></span><span class=line><span class=cl>deb http://mirrors.ustc.edu.cn/archive.raspberrypi.org/debian/ stretch main ui
</span></span></code></pre></div><p>  然后执行：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>sudo apt-get update <span class=o>&amp;&amp;</span> sudo apt-get upgrade -y
</span></span></code></pre></div><p>  等待漫长的软件更新吧！（至少要半个小时）你可以去我博客看看其他文章先，等更新完成后再继续下面步骤。</p><h3 id=buster>Buster</h3><p>  Raspbian于2019/06/12升级到了Buster，基于目前最新的Debian. 换源方法是一样的，只不过源改为：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1>#/etc/apt/sources.list</span>
</span></span><span class=line><span class=cl><span class=c1>#中科大</span>
</span></span><span class=line><span class=cl>deb http://mirrors.ustc.deu.cn/raspbian/raspbian/ buster main contrib non-free rpi
</span></span><span class=line><span class=cl>deb-src http://mirrors.ustc.deu.cn/raspbian/raspbian/ buster main contrib non-free rpi
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1>#/etc/apt/sources.list.d/raspi.list</span>
</span></span><span class=line><span class=cl><span class=c1>#中科大</span>
</span></span><span class=line><span class=cl>deb http://mirrors.ustc.edu.cn/raspbian/raspbian/ buster main
</span></span></code></pre></div><p>  实际上，就只是把 Stretch源 中的 <code>stretch</code> 换成了 <code>buster</code></p><h2 id=换pip源>换pip源</h2><p>  换成国内pip源：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>pip install pip -U
</span></span><span class=line><span class=cl>pip config <span class=nb>set</span> global.index-url https://pypi.tuna.tsinghua.edu.cn/simple
</span></span></code></pre></div><p>  上面是清华源，其他源也行：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1>#阿里云</span>
</span></span><span class=line><span class=cl>http://mirrors.aliyun.com/pypi/simple/
</span></span><span class=line><span class=cl><span class=c1>#中国科技大学</span>
</span></span><span class=line><span class=cl>https://pypi.mirrors.ustc.edu.cn/simple/
</span></span><span class=line><span class=cl><span class=c1>#豆瓣(douban)</span>
</span></span><span class=line><span class=cl>http://pypi.douban.com/simple/
</span></span><span class=line><span class=cl><span class=c1>#中国科学技术大学</span>
</span></span><span class=line><span class=cl>http://pypi.mirrors.ustc.edu.cn/simple/
</span></span></code></pre></div><h2 id=必备软件>必备软件</h2><p>  在前面加<code>sudo apt-get install</code>来安装下面的软件。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>ttf-wqy-microhei <span class=c1>#文泉驿的中文字体#Jussie和lite才需安装</span>
</span></span><span class=line><span class=cl>scim-pinyin <span class=c1>#中文输入法，重启生效</span>
</span></span><span class=line><span class=cl>vim <span class=c1>#命令行的代码编辑器</span>
</span></span><span class=line><span class=cl>cmake <span class=c1>#跨平台的自动化建构系统</span>
</span></span><span class=line><span class=cl>nestopia <span class=c1>#玩NES游戏#不玩就不安装</span>
</span></span><span class=line><span class=cl>smplayer <span class=c1>#媒体播放器，VLC太容易卡死了</span>
</span></span></code></pre></div><p>  还有一些软件要通过安装包安装：</p><ol><li><p>对rar解压支持（貌似有错误:(</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=nb>cd</span> ~/Download
</span></span><span class=line><span class=cl>sudo wget http://rarlab.com/rar/rarlinux-3.8.0.tar.gz
</span></span><span class=line><span class=cl>tar zxvf rarlinux.3.8.0.tar.gz
</span></span><span class=line><span class=cl><span class=nb>cd</span> rar
</span></span><span class=line><span class=cl>make <span class=o>&amp;&amp;</span> make install
</span></span></code></pre></div></li></ol><h2 id=必备python库>必备Python库</h2><p>  在前面加<code>sudo pip3 install</code>来安装下面的库。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>numpy <span class=c1>#数学计算 #如果出错，装上libatlas-base-dev</span>
</span></span><span class=line><span class=cl>matplotlib <span class=c1>#可视化</span>
</span></span><span class=line><span class=cl>nltk <span class=c1>#自然语言处理</span>
</span></span><span class=line><span class=cl>jieba <span class=c1>#中文语言处理</span>
</span></span><span class=line><span class=cl>scipy <span class=c1>#科学计算</span>
</span></span><span class=line><span class=cl>pandas <span class=c1>#数据分析#需要 cython 库#如果出错，用sudo apt-get install python-pandas安装</span>
</span></span><span class=line><span class=cl>statsmodels <span class=c1>#统计模型</span>
</span></span><span class=line><span class=cl>scikit-learn <span class=c1>#机器学习</span>
</span></span><span class=line><span class=cl>scrapy <span class=c1>#爬虫</span>
</span></span></code></pre></div><h2 id=杂七杂八>杂七杂八</h2><h3 id=音质提升>音质提升</h3><p>  树莓派3.5mm输出口有底噪，可在<code>/boot/config.txt</code>文末加入一行：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=nv>audio_pwm_mode</span> <span class=o>=</span> <span class=m>2</span>
</span></span></code></pre></div><p>  保存并重启，音质有少量提升。顺便说一句，3B+播放时如果把音量调为0会听到明显的电流声，3B反而没有，3B的音质竟然比3B+好，因吹斯听。</p><h3 id=玩具>玩具</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>cmatrix <span class=c1>#黑客屏保</span>
</span></span><span class=line><span class=cl>figlet <span class=c1>#ASCII字符画</span>
</span></span></code></pre></div><h1 id=深度学习>深度学习</h1><h2 id=jupyter-notebook>Jupyter Notebook</h2><p>  先升级 pip ，否则会出现 unsupported operand types &mldr;，逐个输入下面的命令：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>wget https://bootstrap.pypa.io/get-pip.py
</span></span><span class=line><span class=cl>python get-pip.py
</span></span><span class=line><span class=cl>python3 get-pip.py
</span></span></code></pre></div><p>  然后执行下面这个命令：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo pip3 install jupyter
</span></span></code></pre></div><p>  如果出现安装不成功的情况，可以逐个安装依赖的库（建议多试几次上面，实在不行再逐个安装）：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>sudo pip3 install ipython-genutils decorator traitlets tornado pyzmq backcall pygment ptyprocess pexpect pickleshare parso jedi wcwidth prompt-toolkit ipython ipykernel jinja2 attrs pyrsistent jsonschema nbformat entrypoints testpath webencodinga bleach defusedxml pandocfilters mistune nbconvert Send2Trassh terminado notebook ipywidgets qtconsole
</span></span></code></pre></div><p>  安装好后，输入下面命令生成配置文件：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>jupyter notebook --generate-config
</span></span></code></pre></div><p>  修改配置文件：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>sudo nano ~/.jupyter/jupyter_notebook_config.py
</span></span></code></pre></div><p>  修改内容如下：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1>#c.NotebookApp.ip = &#39;localhost&#39;</span>
</span></span><span class=line><span class=cl>改为
</span></span><span class=line><span class=cl>c.NotebookApp.ip <span class=o>=</span> <span class=s1>&#39;*&#39;</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1>#c.NotebookApp.open_browser = True</span>
</span></span><span class=line><span class=cl>改为
</span></span><span class=line><span class=cl>c.NotebookApp.open_browser <span class=o>=</span> False
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1>#c.NotebookApp.port = 8888</span>
</span></span><span class=line><span class=cl>改为
</span></span><span class=line><span class=cl>c.NotebookApp.port <span class=o>=</span> <span class=m>8888</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1>#c.NotebookApp.notebook_dir = &#39;&#39;</span>
</span></span><span class=line><span class=cl>改为
</span></span><span class=line><span class=cl>c.NotebookApp.notebook_dir <span class=o>=</span> <span class=s1>&#39;/home/pi&#39;</span>
</span></span></code></pre></div><p>  配置完成后修改密码：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>jupyter notebook password
</span></span></code></pre></div><p>  然后就可以使用Jupyter Notebook了，方法是在树莓派上输入<code>jupyter notebook</code>，然后在电脑上的浏览器中打开<code>树莓派的ip地址:8888</code></p><h2 id=opencv-340>Opencv 3.4.0</h2><blockquote><p>参考博客<a href=https://www.jianshu.com/p/3180a253fe3c>【树莓派】树莓派+OpenCV3.4 + python3.5 成功以及注意细节</a>，安装后占4.8GB，如果空间不足就别装</p></blockquote><p>  安装numpy：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo pip3 install numpy
</span></span></code></pre></div><p>  扩大micro SD卡空间：进入<code>raspi-config</code>，选择<code>Advanced Options</code>，选择<code>Expand Filesystem</code>，重启。</p><p>  安装所需要的库（一次一行，别一次全装，安装出错看log）：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>sudo apt-get install build-essential git cmake pkg-config -y
</span></span><span class=line><span class=cl>sudo apt-get install libjpeg8-dev -y
</span></span><span class=line><span class=cl>sudo apt-get install libtiff5-dev -y
</span></span><span class=line><span class=cl>sudo apt-get install libjasper-dev -y
</span></span><span class=line><span class=cl>sudo apt-get install libpng12-dev -y
</span></span><span class=line><span class=cl>sudo apt-get install libavcodec-dev libavformat-dev libswscale-dev libv4l-dev -y
</span></span><span class=line><span class=cl>sudo apt-get install libgtk2.0-dev -y
</span></span><span class=line><span class=cl>sudo apt-get install libatlas-base-dev gfortran -y
</span></span></code></pre></div><p>  新建一个文件夹叫opencv，并进入该文件夹</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>mkdir opencv
</span></span><span class=line><span class=cl><span class=nb>cd</span> opencv
</span></span></code></pre></div><p>  从Github上下载安装文件</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>wget https://github.com/Itseez/opencv/archive/3.4.0.zip
</span></span><span class=line><span class=cl>wget https://github.com/Itseez/opencv_contrib/archive/3.4.0.zip
</span></span></code></pre></div><p>  解压这两个文件</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>unzip 3.4.0.zip 
</span></span><span class=line><span class=cl>unzip 3.4.0.zip.1
</span></span></code></pre></div><p>  创建build文件夹，并进入</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=nb>cd</span> opencv-3.4.0
</span></span><span class=line><span class=cl>mkdir build
</span></span><span class=line><span class=cl><span class=nb>cd</span> build
</span></span></code></pre></div><p>  然后开始cmake，以下命令在同一行，但不要急！看命令后面的解释：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>cmake -D <span class=nv>CMAKE_BUILD_TYPE</span><span class=o>=</span>RELEASE -D <span class=nv>CMAKE_INSTALL_PREFIX</span><span class=o>=</span>/usr/local -D <span class=nv>INSTALL_C_EXAMPLES</span><span class=o>=</span>ON -D <span class=nv>INSTALL_PYTHON_EXAMPLES</span><span class=o>=</span>ON -D <span class=nv>OPENCV_EXTRA_MODULES_PATH</span><span class=o>=</span>/home/pi/opencv/opencv_contrib-3.4.0/modules -D <span class=nv>BUILD_EXAMPLES</span><span class=o>=</span>ON -D <span class=nv>WITH_LIBV4L</span><span class=o>=</span>ON <span class=nv>PYTHON3_EXECUTABLE</span><span class=o>=</span>/usr/bin/python3.5 <span class=nv>PYTHON_INCLUDE_DIR</span><span class=o>=</span>/usr/include/python3.5 <span class=nv>PYTHON_LIBRARY</span><span class=o>=</span>/usr/lib/arm-linux-gnueabihf/libpython3.5m.so <span class=nv>PYTHON3_NUMPY_INCLUDE_DIRS</span><span class=o>=</span>/usr/lib/python3/dist-packages/numpy/core/include ..
</span></span></code></pre></div><p>  **千万要注意，上面的路径不要写错！**最好去看看有没有对应的文件或文件夹，也就是下面几个</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=nv>OPENCV_EXTRA_MODULES_PATH</span><span class=o>=</span>/home/pi/opencv_contrib-3.4.0/modules <span class=c1>#解压出来的东西</span>
</span></span><span class=line><span class=cl><span class=nv>PYTHON_INCLUDE_DIR</span><span class=o>=</span>/usr/include/python3.5 
</span></span><span class=line><span class=cl><span class=nv>PYTHON_LIBRARY</span><span class=o>=</span>/usr/lib/arm-linux-gnueabihf/libpython3.5m.so 
</span></span><span class=line><span class=cl><span class=nv>PYTHON3_NUMPY_INCLUDE_DIRS</span><span class=o>=</span>/usr/lib/python3/dist-packages/numpy/core/include <span class=c1>#numpy的安装路径</span>
</span></span></code></pre></div><p>  确保无误后再开始cmake</p><p>  最后开始编译，欲速则不达，不要用make -j4等加速</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>sudo make <span class=o>&amp;&amp;</span> sudo make install
</span></span></code></pre></div><p>  等四五个小时后就安装完成了。</p><h2 id=tensorflow>Tensorflow</h2><blockquote><p>参考博客<a href=https://blog.csdn.net/qq_38960810/article/details/78640171>从零开始：在树莓派上构建tensorflow——详细至极</a>，他装的是1.1.0，我装的是1.13.1。安装后占200多M</p></blockquote><p>  先下载这些库，其实你不安装也行，待会安装tensorflow时它会自动安装，但那时容易出错。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>sudo pip3 install grpcio protobuf numpy tensorboard gast termcolor astor keras absl-py futures enum markdown h5py mock pbr
</span></span></code></pre></div><p>  如果某个库，比如 h5py 装不了，可以去浏览器下载：<a href=https://piwheels.org/simple/h5py/h5py-2.9.0-cp35-cp35m-linux_armv7l.whl>https://piwheels.org/simple/h5py/h5py-2.9.0-cp35-cp35m-linux_armv7l.whl</a>（这个链接就是 pip3 install 之后出现的链接），然后执行：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=nb>cd</span> /home/pi/Downloads/ <span class=c1>#去到下载目录</span>
</span></span><span class=line><span class=cl>sudo pip3 install h5py-2.9.0-cp35-cp35m-linux_armv7l.whl
</span></span></code></pre></div><p>  其他安装不了的库也这样安装。</p><p>  如果上网的姿势很科学，可以直接：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>sudo pip3 install tensorflow
</span></span></code></pre></div><p>  如果你觉得上面的速度太慢了，可以去浏览器下载（或用wget）：<a href=https://piwheels.org/simple/tensorflow/tensorflow-1.14.0-cp35-none-linux_armv7l.whl>https://piwheels.org/simple/tensorflow/tensorflow-1.14.0-cp35-none-linux_armv7l.whl</a>，然后执行：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=nb>cd</span> /home/pi/Downloads <span class=c1>#去到下载目录，如果用wget则不用这行</span>
</span></span><span class=line><span class=cl>sudo pip3 install tensorflow-1.14.0-cp35-none-linux_armv7l.whl
</span></span></code></pre></div><p>  然后就等等等等15~30分钟吧。</p><p>  下面我们试试图像识别，运行下面的命令：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=nb>cd</span> <span class=o>&amp;&amp;</span> mkdir tensorflow
</span></span><span class=line><span class=cl><span class=nb>cd</span> tensorflow/
</span></span><span class=line><span class=cl>wget https://raw.githubusercontent.com/tensorflow/models/tutorials/image/imagenet/classify_image.py
</span></span></code></pre></div><p>  然后你就会在/home/pi/tensorflow文件夹里看到一个classify_image.py，运行该程序，它会自动下载图像识别库（85M）（只有第一次会下载，以后就不用了）。</p><p>  等到它下载完成后，通过下面命令进行图像识别：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>python3 /home/pi/tensorflow/classify_image.py --image_file &lt;图片路径&gt;
</span></span></code></pre></div><p>  比如我在网上找了一张hamster图片：</p><p><img src=https://static.wamiz.fr/images/animaux/rongeurs/crop/medium/hamster.jpg alt=仓鼠></p><p>  运行后显示的结果是（效果还行）：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>hamster <span class=o>(</span><span class=nv>score</span> <span class=o>=</span> 0.70514<span class=o>)</span>
</span></span><span class=line><span class=cl>mink <span class=o>(</span><span class=nv>score</span> <span class=o>=</span> 0.00465<span class=o>)</span>
</span></span><span class=line><span class=cl>polecat, fitch, foulmart, foumart, Mustela putorius <span class=o>(</span><span class=nv>score</span> <span class=o>=</span> 0.00370<span class=o>)</span>
</span></span><span class=line><span class=cl>black-footed fettet, ferret, Mustela nigripes <span class=o>(</span><span class=nv>score</span> <span class=o>=</span> 0.00274<span class=o>)</span>
</span></span><span class=line><span class=cl>skunk, polecat, wood pussy <span class=o>(</span><span class=nv>score</span> <span class=o>=</span> 0.00266<span class=o>)</span>
</span></span></code></pre></div><p>  貌似只能识别动物和物品（试了一下黄色图片，识别不了）。</p></div></div></main><script src=https://tokinx.github.io/lately/lately.min.js></script>
<script>window.Lately&&Lately.init({target:".post-date"})</script></body></html>