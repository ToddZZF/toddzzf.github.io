<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=pragma content="no-cache"><meta http-equiv=cache-control content="no-cache"><meta http-equiv=expires content="0"><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/lxgw-wenkai-lite-webfont@1.7.0/style.css><link rel=stylesheet href=/css/tailwindcss/output.css><link rel=stylesheet href=/css/mdstyle.css><script defer src=https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js></script>
<link href=https://cdn.bootcdn.net/ajax/libs/highlight.js/11.4.0/styles/github-dark-dimmed.min.css rel=stylesheet><script id=highlightjs src=https://cdn.bootcdn.net/ajax/libs/highlight.js/11.4.0/highlight.min.js async></script>
<script>document.getElementById("highlightjs").addEventListener("load",function(){hljs.highlightAll()})</script><title>Arduinoåº“ä¹‹IRremote - Todd's Blog</title></head><body class="font-kai bg-neutral-50 antialiased"><header class="w-full text-gray-700 bg-white dark-mode:text-gray-200 dark-mode:bg-gray-800 shadow-sm"><div x-data="{ open: false }" class="flex flex-col max-w-screen-xl px-4 mx-auto md:items-center md:justify-between md:flex-row md:px-6 lg:px-8"><div class="p-4 flex flex-row items-center justify-between"><a href=/ class="text-lg tracking-wider text-gray-900 uppercase rounded-lg dark-mode:text-white">Todd's Blog</a>
<button class="md:hidden rounded-lg focus:outline-none focus:drop-shadow-sm" @click="open = !open"><svg fill="currentcolor" viewBox="0 0 20 20" class="w-6 h-6"><path x-show="!open" fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4A1 1 0 013 5zm0 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm6 5a1 1 0 011-1h6a1 1 0 110 2h-6a1 1 0 01-1-1z" clip-rule="evenodd"/><path x-show="open" fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414.0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"/></svg></button></div><nav :class="{'flex': open, 'hidden': !open}" class="flex-col flex-grow pb-4 md:pb-0 hidden md:flex md:justify-end md:flex-row"><a class="px-4 py-2 mt-2 text-sm font-semibold text-gray-900 rounded-lg dark-mode:bg-gray-700 dark-mode:hover:bg-gray-600 dark-mode:focus:bg-gray-600 dark-mode:focus:text-white dark-mode:hover:text-white dark-mode:text-gray-200 md:mt-0 hover:text-gray-900 focus:text-gray-900 hover:bg-gray-200 focus:bg-gray-200 focus:outline-none focus:shadow-outline" href=/goodstuffs/>å¥½ç‰©</a>
<a class="px-4 py-2 mt-2 text-sm font-semibold text-gray-900 rounded-lg dark-mode:bg-gray-700 dark-mode:hover:bg-gray-600 dark-mode:focus:bg-gray-600 dark-mode:focus:text-white dark-mode:hover:text-white dark-mode:text-gray-200 md:mt-0 hover:text-gray-900 focus:text-gray-900 hover:bg-gray-200 focus:bg-gray-200 focus:outline-none focus:shadow-outline" href=/posts/>æ—¥å¸¸</a></nav></div></header><main><div class="max-w-screen-lg w-full mx-auto py-8 px-4 flex flex-col gap-4"><div class="breadcrumb w-full bg-white py-2 px-4 shadow-sm"><ul class="flex align-baseline flex-wrap"><li class="after:content-['>'] after:mr-0.5 after:text-gray-300 whitespace-nowrap"><a href=http://example.org/>ä¸»é¡µ</a></li><li class="after:content-['>'] after:mr-0.5 after:text-gray-300 whitespace-nowrap"><a href=http://example.org/posts/>æ—¥å¸¸</a></li><li class="active whitespace-nowrap"><a href=http://example.org/posts/2019/2019-08-22-ir-remote/>Arduinoåº“ä¹‹IRremote</a></li></ul></div><div class="w-full mx-auto py-8"><div class="text-4xl font-semibold">Arduinoåº“ä¹‹IRremote</div><div class="flex gap-2 text-sm flex-wrap"><span class=post-date>2019-08-22</span>
<a href=/posts/>ğŸ“‚æ—¥å¸¸</a></div></div><div class="mdstyle highlightjs"><blockquote><p>IRremoteçš„wikiçš„ä¸­æ–‡ç¿»è¯‘</p></blockquote><h1 id=ä»‹ç»>ä»‹ç»</h1><p>â€ƒâ€ƒIRremote å¯ä»¥è®©ä½ ç”¨æ ‡å‡†çš„çº¢å¤–é¥æ§å™¨æ§åˆ¶ Arduinoï¼Œä¹Ÿå¯ä»¥ç”¨ Arduino æ§åˆ¶å…¶ä»–è®¾å¤‡ï¼ˆç”µè§†ã€éŸ³ç®±ç­‰ï¼‰</p><p>â€ƒâ€ƒä¸‹è½½å®‰è£…è¯·è§<a href=https://github.com/shirriff/Arduino-IRremote>Arduino-IRremote github page</a></p><p>â€ƒâ€ƒè¿™ä»½æ–‡æ¡£åŒ…æ‹¬ï¼š</p><p>[TOC]</p><h1 id=ç¡¬ä»¶è®¾ç½®>ç¡¬ä»¶è®¾ç½®</h1><p><img src=https://camo.githubusercontent.com/8ac489718a9de4e84d3d508f4322fa4e55e70157/687474703a2f2f66696c65732e617263666e2e636f6d2f696d616765732f61726475696e6f2d69722e6a7067 alt=img></p><h2 id=çº¢å¤–æ¥æ”¶>çº¢å¤–æ¥æ”¶</h2><p>â€ƒâ€ƒIRremote åº“å¯ä»¥ä½¿ç”¨ä»»ä½•ä¸€ä¸ªæ•°å­—ä¿¡å·å¼•è„šæ¥æ¥æ”¶ 38kHz çº¢å¤–æ¥æ”¶æ¨¡å—çš„æ•°æ®ã€‚è¿™äº›æ¨¡å—è‡ªå¸¦äº†æ»¤æ³¢å’Œé€»è¾‘è¾“å‡ºã€‚ä¸èƒ½ç›´æ¥ç”¨çº¢å¤–å‘å°„ç®¡å’Œçº¢å¤–æ¥æ”¶ç®¡ã€‚</p><p><img src=https://camo.githubusercontent.com/88ce3189895c447e386a7eb94d62600b70cfade8/687474703a2f2f66696c65732e617263666e2e636f6d2f696d616765732f69722d736368656d617469632e706e67 alt></p><h2 id=çº¢å¤–å‘å°„>çº¢å¤–å‘å°„</h2><p>â€ƒâ€ƒå°†çº¢å¤–å‘å°„ç®¡å’Œé€‚å½“å¤§å°çš„ç”µé˜»è¿æ¥åˆ°æœ‰PWMçš„ pin 3ï¼Œå¹¶ç¡®ä¿çº¢å¤–å‘å°„ç®¡ææ€§æ­£ç¡®ã€‚æˆ‘å·²ç»ç”¨ NTE 3027 å’Œ 100 æ¬§å®éªŒè¿‡ï¼ˆå¦‚ä¸Šå›¾ï¼‰ï¼Œå‘å°„è·ç¦»å¤§æ¦‚æ˜¯4~5ç±³ã€‚å¯ä»¥åŠ å¤šä¸€ä¸ªä¸‰æç®¡æ¥åŠ å¤§è·ç¦»ã€‚</p><h1 id=çº¢å¤–å‘å°„ç¤ºä¾‹>çº¢å¤–å‘å°„ç¤ºä¾‹</h1><p>ä¸‹é¢è¿™ä¸ªæ˜¯ Example -> IRremote -> IRsendDemoï¼Œå®ƒå°†æ§åˆ¶ç´¢å°¼ç”µè§†çš„å¼€å’Œå…³ã€‚éœ€è¦å°†ä¸€ä¸ªçº¢å¤–å‘å°„ç®¡è¿æ¥åˆ° pin 3.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;IRremote.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=n>IRsend</span> <span class=n>irsend</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>setup</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>Serial</span><span class=p>.</span><span class=nf>begin</span><span class=p>(</span><span class=mi>9600</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>loop</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=n>Serial</span><span class=p>.</span><span class=nf>read</span><span class=p>()</span> <span class=o>!=</span> <span class=o>-</span><span class=mi>1</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=mi>3</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=n>irsend</span><span class=p>.</span><span class=nf>sendSony</span><span class=p>(</span><span class=mh>0xa90</span><span class=p>,</span> <span class=mi>12</span><span class=p>);</span> <span class=c1>// Sony TV power code
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=nf>delay</span><span class=p>(</span><span class=mi>100</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h1 id=çº¢å¤–æ¥æ”¶ç¤ºä¾‹>çº¢å¤–æ¥æ”¶ç¤ºä¾‹</h1><h2 id=æ¥æ”¶å¹¶æ‰“å°æ•°æ®>æ¥æ”¶å¹¶æ‰“å°æ•°æ®</h2><p>ä¸‹é¢è¿™æ®µä»£ç å°†æ¥æ”¶ä¸€ä¸ªæ•°æ®å¹¶é€šè¿‡ä¸²å£æ‰“å°å‡ºæ¥ï¼Œå¯ä»¥ç”¨äºæ£€æµ‹ä½ çš„é¥æ§å™¨ä½¿ç”¨äº†ä»€ä¹ˆæ•°æ®æ ¼å¼ã€‚Exampleä¸­è¿˜æœ‰ä¸€ä¸ªæ›´å¤æ‚çš„ä¾‹å­ <a href=https://github.com/shirriff/Arduino-IRremote/blob/master/examples/IRrecvDump/IRrecvDump.pde>IRrecvDump</a></p><p>åŒæ—¶è¿™æ®µä»£ç ä¹Ÿå±•ç¤ºäº†å¦‚ä½•åœ¨æŒ‰ä¸‹é¥æ§å™¨åè§¦å‘å¯¹åº”çš„è¯­å¥ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;IRremote.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=n>IRrecv</span> <span class=nf>irrecv</span><span class=p>(</span><span class=mi>11</span><span class=p>);</span> <span class=c1>// Receive on pin 11
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>decode_results</span> <span class=n>results</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>setup</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>Serial</span><span class=p>.</span><span class=nf>begin</span><span class=p>(</span><span class=mi>9600</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=n>irrecv</span><span class=p>.</span><span class=nf>enableIRIn</span><span class=p>();</span> <span class=c1>// Start the receiver
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>loop</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=n>irrecv</span><span class=p>.</span><span class=nf>decode</span><span class=p>(</span><span class=o>&amp;</span><span class=n>results</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Serial</span><span class=p>.</span><span class=nf>println</span><span class=p>(</span><span class=n>results</span><span class=p>.</span><span class=n>value</span><span class=p>,</span> <span class=n>HEX</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>irrecv</span><span class=p>.</span><span class=nf>resume</span><span class=p>();</span> <span class=c1>// Continue receiving
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=é•¿æŒ‰ä¸æ¾å¼€>é•¿æŒ‰ä¸æ¾å¼€</h2><p>ä¸‹é¢è¿™æ®µä»£ç å±•ç¤ºäº†åœ¨é•¿æŒ‰é¥æ§å™¨æ—¶æ‰§è¡Œä¸€æ®µä»£ç ï¼Œæ¾å¼€åæ‰§è¡Œå¦ä¸€æ®µä»£ç ã€‚ç”±äºé¥æ§å™¨åœ¨æŒ‰ä¸‹æ—¶ä¼šä¸æ–­åœ°å‘é€ä¸€ä¸ªæ•°æ®ï¼Œæ‰€ä»¥éœ€è¦ç”¨ä¸€ä¸ªè®¡æ—¶å™¨æ¥åˆ¤è¯»æ˜¯å¦æœ‰æ¾å¼€é¥æ§å™¨ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;IRremote.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#define MAX_TIME 150 </span><span class=c1>// max ms between codes
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=cp>#define LED_PIN 3
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=kt>long</span> <span class=n>lastPressTime</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>state</span> <span class=o>=</span> <span class=n>LOW</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>IRrecv</span> <span class=nf>irrecv</span><span class=p>(</span><span class=mi>11</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>decode_results</span> <span class=n>results</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>setup</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nf>pinMode</span><span class=p>(</span><span class=n>LED_PIN</span><span class=p>,</span> <span class=n>OUTPUT</span><span class=p>);</span>  <span class=c1>// Status on pin 3 LED
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=n>irrecv</span><span class=p>.</span><span class=nf>enableIRIn</span><span class=p>();</span> <span class=c1>// Start the receiver
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>loop</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=n>irrecv</span><span class=p>.</span><span class=nf>decode</span><span class=p>(</span><span class=o>&amp;</span><span class=n>results</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=mi>1</span><span class=p>)</span> <span class=p>{</span>  <span class=c1>// Can check for a specific button here
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=k>if</span> <span class=p>(</span><span class=n>state</span> <span class=o>==</span> <span class=n>LOW</span><span class=p>)</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=n>state</span> <span class=o>=</span> <span class=n>HIGH</span><span class=p>;</span>  <span class=c1>// Button pressed, so set state to HIGH
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nf>digitalWrite</span><span class=p>(</span><span class=n>LED_PIN</span><span class=p>,</span> <span class=n>HIGH</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=n>lastPressTime</span> <span class=o>=</span> <span class=nf>millis</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>irrecv</span><span class=p>.</span><span class=nf>resume</span><span class=p>();</span> <span class=c1>// Receive the next value
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=n>state</span> <span class=o>==</span> <span class=n>HIGH</span> <span class=o>&amp;&amp;</span> <span class=nf>millis</span><span class=p>()</span> <span class=o>-</span> <span class=n>lastPressTime</span> <span class=o>&gt;</span> <span class=n>MAX_TIME</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>state</span> <span class=o>=</span> <span class=n>LOW</span><span class=p>;</span> <span class=c1>// Haven&#39;t heard from the button for a while, so not pressed
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nf>digitalWrite</span><span class=p>(</span><span class=n>LED_PIN</span><span class=p>,</span> <span class=n>LOW</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>æ³¨æ„ï¼Œ<code>if (1)</code> ä¼šå¯¼è‡´åªè¦æŒ‰ä¸‹ä»»ä½•æŒ‰é’®ï¼ˆå³ä½¿å’ŒåŸæ¥çš„æŒ‰é’®ä¸åŒï¼‰éƒ½èƒ½è§¦å‘ä»£ç ã€‚å¦‚æœè¦è®¾ç½®ä¸ºç‰¹å®šæŒ‰é’®ï¼Œéœ€è¦æ›¿æ¢ä¸º <code>if (results.value == 0x1234)</code> ï¼ˆ0x1234 æ˜¯å¯¹åº”æŒ‰é’®çš„ç¼–ç ï¼‰</p><h2 id=irremote-api>IRremote API</h2><p>â€ƒâ€ƒAPI é€šè¿‡ <code>IRsend</code> å¯¹è±¡æ¥å‘é€çº¢å¤–æ•°æ®ï¼Œé€šè¿‡ <code>IRrecv</code> å¯¹è±¡æ¥æ¥æ”¶çº¢å¤–æ•°æ®ã€‚è¿™ä¸ªåº“ä¸èƒ½åŒæ—¶å‘é€å’Œæ¥æ”¶ï¼Œä½†å¯ä»¥åœ¨å‘é€å’Œæ¥æ”¶ä¹‹é—´è½¬æ¢ã€‚</p><h2 id=å‘é€>å‘é€</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>IRsend</span> <span class=n>irsend</span><span class=p>;</span>
</span></span></code></pre></div><p>æ–°å»ºä¸€ä¸ª <code>IRsend</code> å¯¹è±¡</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>irsend</span><span class=p>.</span><span class=nf>sendNEC</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>bits</span><span class=p>);</span>
</span></span></code></pre></div><p>ä»¥ NECæ ¼å¼ç¼–ç  å‘é€æ•°æ®ï¼Œ<code>bits</code> æŒ‡å®šäº†ç¼–ç é•¿åº¦ï¼Œä¸€èˆ¬æ˜¯16</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>irsend</span><span class=p>.</span><span class=nf>sendSony</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>bits</span><span class=p>);</span>
</span></span></code></pre></div><p>ä»¥ Sonyæ ¼å¼ç¼–ç  å‘é€æ•°æ®</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>irsend</span><span class=p>.</span><span class=nf>sendSAMSUNG</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>bits</span><span class=p>);</span>
</span></span></code></pre></div><p>ä»¥ ä¸‰æ˜Ÿæ ¼å¼ç¼–ç  å‘é€æ•°æ®</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>irsend</span><span class=p>.</span><span class=nf>sendRC5</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>bits</span><span class=p>);</span>
</span></span></code></pre></div><p>ä»¥ RC5æ ¼å¼ç¼–ç  å‘é€æ•°æ®</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>irsend</span><span class=p>.</span><span class=nf>sendRC6</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>bits</span><span class=p>);</span>
</span></span></code></pre></div><p>ä»¥ RC6æ ¼å¼ç¼–ç  å‘é€æ•°æ®</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>irsend</span><span class=p>.</span><span class=nf>sendRaw</span><span class=p>(</span><span class=n>buf</span><span class=p>,</span> <span class=n>len</span><span class=p>,</span> <span class=n>hertz</span><span class=p>);</span>
</span></span></code></pre></div><p>Sends a code corresponding to the buffer of raw durations</p><h2 id=æ¥æ”¶>æ¥æ”¶</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>IRrecv</span> <span class=nf>irrecv</span><span class=p>(</span><span class=n>pin</span><span class=p>);</span>
</span></span></code></pre></div><p>åˆ›å»ºä¸€ä¸ª<code>IRrecv</code> å¯¹è±¡</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>irrecv</span><span class=p>.</span><span class=nf>enableIRIn</span><span class=p>();</span>
</span></span></code></pre></div><p>å¼€å§‹æ¥æ”¶çº¢å¤–æ•°æ®</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=n>irrecv</span><span class=p>.</span><span class=nf>decode</span><span class=p>(</span><span class=o>&amp;</span><span class=n>results</span><span class=p>)</span>
</span></span></code></pre></div><p>å¦‚æœæ¥æ”¶åˆ°æ•°æ®ï¼Œè¿”å›1ï¼Œå¦åˆ™è¿”å›0.
The fields of <em>results</em> are:</p><table><thead><tr><th><code>decode_type</code></th><th>NEC, SONY, RC5, RC6, or UNKNOWN</th></tr></thead><tbody><tr><td><code>value</code></td><td>the received code value</td></tr><tr><td><code>bits</code></td><td>The number of bits received</td></tr><tr><td><code>rawbuf[]</code></td><td>Raw durations</td></tr><tr><td><code>rawlen</code></td><td>Number of records in <em>rawbuf</em></td></tr></tbody></table><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>irrecv</span><span class=p>.</span><span class=nf>resume</span><span class=p>()</span>
</span></span></code></pre></div><p>å¿…é¡»åœ¨ <code>irrecv.decode()</code> åè°ƒç”¨ï¼Œä»¥ç»§ç»­æ¥æ”¶</p><h1 id=irremoteçš„å®ä¾‹>IRremoteçš„å®ä¾‹</h1><p>Many projects have been built with the IRremote library</p><ul><li><a href=http://www.abluestar.com/blog/arduino-infrared-blue-robot-challenge-burning-man-and-superman/>Arduino Infrared, Blue Robot challenge</a></li><li>Controlling a <a href=http://arcfn.com/2010/01/dont-walk-controlling-pedestrian-sign.html>pedestrian sign</a> with a remote.</li><li>Extending the library to <a href=http://arcfn.com/2010/01/using-arbitrary-remotes-with-arduino.html>arbitrary remotes</a></li><li><a href=http://arcfn.com/2009/11/controlling-your-stereo-over-web-with.html>Controlling my stereo</a> over the web.</li><li><a href=http://arcfn.com/2009/09/arduino-universal-remote-record-and.html>&ldquo;Universal remote</a> to record and playback IR codes.</li><li><a href=http://arcfn.com/2009/11/ir-bubbles-controlling-relay-with.html>Infrared bubble maker</a> project.</li><li><a href=http://www.arcfn.com/2010/03/detecting-ir-beam-break-with-arduino-ir.html>Using the library to detect IR beam breaks</a></li><li><a href=http://electrosthetics.blogspot.com/2009/11/arduino-universal-remote-and-more.html>electrosthetics</a> used the library to control a home theater receiver.</li><li><a href=http://luckylarry.co.uk/2010/06/arduino-redefining-the-tv-remote/>Arduino: Redefining the TV Remote</a> â€“ using the library and an ultrasonic sensor to control a TV by waving your hand.</li><li><a href=http://www.hobby-werkstatt-blog.de/arduino/286-arduino-infrarot-receiver-module.php>Arduino: Infrarot-Receiver Module</a> a 4WD controller (German page)</li><li><a href=http://www.tehnorama.ro/smart-lock-controlled-light-with-remote-temperature-led-graph/>Smart Lock with Remote Controlled Light</a> (Romanian page)</li></ul><p>ä¸‹é¢æ˜¯ä¸€äº›ç”¨ IRremoteçš„å®ä¾‹ï¼š</p><ul><li><p><a href=https://blog.csdn.net/zuoheizhu/article/details/87452110>Arduino-IRremote-çº¢å¤–é¥æ§å™¨,å‘å°„ä¸æ¥æ”¶</a></p></li><li><p><a href=https://www.ncnynl.com/archives/201606/84.html>Arduinoçº¢å¤–ä¼ æ„Ÿå™¨-IR Transmitter Moduleçº¢å¤–å‘å°„æ¨¡å—</a></p></li><li><p><a href=https://www.arduino.cn/thread-1394-1-1.html>Arduinoæ•™ç¨‹ï¼ˆæé«˜ç¯‡ï¼‰â€”â€”çº¢å¤–é¥æ§(å‘å°„ç¯‡)</a></p></li><li><p><a href=http://www.geek-workshop.com/thread-3444-1-1.html>Arduinoçº¢å¤–é¥æ§ç³»åˆ—æ•™ç¨‹</a> ä¸€å…±æœ‰6ç¯‡</p></li><li></li></ul><h1 id=çº¢å¤–ç¼–ç >çº¢å¤–ç¼–ç </h1><p>IRremoteæœ‰å¦‚ä¸‹å‡ ç§ç¼–ç ï¼š</p><p>NEC: 32 bits are transmitted, most-significant bit first. (<a href=http://www.sbprojects.com/knowledge/ir/nec.php>protocol details</a>)</p><p>Sony: 12 or more bits are transmitted, most-significant bit first. Typically 12 or 20 bits are used. Note that the official protocol is least-significant bit first. (<a href=http://www.sbprojects.com/knowledge/ir/sirc.php>protocol details</a>) For more details, I&rsquo;ve written an article that describes the Sony protocol in much more detail: <a href=http://www.arcfn.com/2010/03/understanding-sony-ir-remote-codes-lirc.html>Understanding Sony IR remote codes</a>.</p><p>RC5: 12 or more bits are transmitted most-significant bit first. The message starts with the two start bits, which are not part of the code values. (<a href=http://www.sbprojects.com/knowledge/ir/rc5.php>protocol details</a>)</p><p>RC6: 20 (typically) bits are transmitted, most-significant bit first. The message starts with a leader pulse, and a start bit, which is not part of the code values. The fourth bit is transmitted double-wide, since it is the trailer bit. (<a href=http://www.sbprojects.com/knowledge/ir/rc6.php>protocol details</a>)</p><p>For Sony and RC5/6, each transmission must be repeated 3 times as specified in the protocol. The transmission code does not implement the RC5/6 toggle bit; that is up to the caller.</p><h1 id=æ’é™¤æ•…éšœ>æ’é™¤æ•…éšœ</h1><p>å¦‚æœåœ¨æµ‹è¯•çº¢å¤–æ¥æ”¶æ—¶ï¼Œæ”¶åˆ°çš„æ˜¯éšæœºçš„æ•°æ®ï¼Œå¯ä»¥å°è¯•è°ƒæš—æˆ¿é—´çš„ç¯å…‰ã€‚æŸäº›æ—¥å…‰ç¯ä¼šå¯¹ 38kHzçº¢å¤–ä¿¡å·äº§ç”Ÿå¹²æ‰°ã€‚</p></div></div></main><script src=https://tokinx.github.io/lately/lately.min.js></script>
<script>window.Lately&&Lately.init({target:".post-date"})</script></body></html>