<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><title>尝试Hugo</title><link rel=canonical href=https://todd.scuteee.com/posts/2022/2022-05-25-try-out-hugo/><link rel=stylesheet href=/scss/style.min.7fb5a1f08f67e3bdcc6696b335c3102ad72b845106e61a71cd0402e10b5f22de.css><meta property="og:title" content="尝试Hugo"><meta property="og:description" content><meta property="og:url" content="https://todd.scuteee.com/posts/2022/2022-05-25-try-out-hugo/"><meta property="og:site_name" content="Todd's Blog"><meta property="og:type" content="article"><meta property="article:section" content="Posts"><meta property="article:published_time" content="2022-05-25T14:34:00+08:00"><meta property="article:modified_time" content="2022-05-25T14:34:00+08:00"><meta name=twitter:title content="尝试Hugo"><meta name=twitter:description content><link rel="shortcut icon" href=favicon.png></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=切换菜单>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/avatar_huab97f25f655a875cd3229d10d376a5bb_18063_300x0_resize_box_3.png width=300 height=300 class=site-logo loading=lazy alt=Avatar></a>
<span class=emoji>💘</span></figure><div class=site-meta><h1 class=site-name><a href=/>Todd's Blog</a></h1><h2 class=site-description>Life & Work</h2></div></header><ol class=social-menu><li><a href=https://github.com/toddzzf target=_blank title=GitHub><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li></ol><ol class=menu id=main-menu><li class=current><a href=/posts/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>日常</span></a></li><li><a href=/food/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-tools-kitchen-2" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19 3v12h-5c-.023-3.681.184-7.406 5-12zm0 12v6h-1v-3M8 4v17M5 4v3a3 3 0 106 0V4"/></svg><span>吃的</span></a></li><li><a href=/design/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-code" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><polyline points="7 8 3 12 7 16"/><polyline points="17 8 21 12 17 16"/><line x1="14" y1="4" x2="10" y2="20"/></svg><span>网页设计</span></a></li><li><a href=/ppt/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-presentation" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><line x1="3" y1="4" x2="21" y2="4"/><path d="M4 4v10a2 2 0 002 2h12a2 2 0 002-2V4"/><line x1="12" y1="16" x2="12" y2="20"/><line x1="9" y1="20" x2="15" y2="20"/><path d="M8 12l3-3 2 2 3-3"/></svg><span>PPT</span></a></li><li><a href=/analogic/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-circuit-diode" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 12h-6"/><path d="M2 12h6"/><path d="M8 7l8 5-8 5z"/><path d="M16 7v10"/></svg><span>Analog IC</span></a></li><li><a href=/analog/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-circuit-diode" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 12h-6"/><path d="M2 12h6"/><path d="M8 7l8 5-8 5z"/><path d="M16 7v10"/></svg><span>模拟电子技术</span></a></li><div class=menu-bottom-section><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>暗色模式</span></li></div></ol></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><div class=article-title-wrapper><h2 class=article-title><a href=/posts/2022/2022-05-25-try-out-hugo/>尝试Hugo</a></h2></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>May 25, 2022</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>阅读时长: 12 分钟</time></div></footer></div></header><section class=article-content><p>本博客已用 Hugo 重构。</p><h2 id=hugo入门>Hugo入门</h2><p>自从我开始写博客以来，我一直使用的是 <a class=link href=https://jekyllrb.com/ target=_blank rel=noopener>Jekyll</a>，因为 github page 用的就是 Jekyll，我不需要在本地生成静态页面。但当我开始自己设计主题后，Jekyll 繁琐的安装方式和非常慢的生成页面的速度，让我很不爽。因此我决定尝试使用 <a class=link href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a>. Hugo 是由 Go 编写的，并且运行速度很快（宣传生成一篇文章只需 1ms）。Hugo 的安装方式十分简单，下载一个 exe 文件，然后添加到 PATH 里即可。可以用以下命令验证安装是否成功：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>$ hugo version
</span></span><span class=line><span class=cl>hugo v0.99.1-d524067382e60ce2a2248c3133a1b3af206b6ef1 windows/amd64 <span class=nv>BuildDate</span><span class=o>=</span>2022-05-18T11:18:14Z <span class=nv>VendorInfo</span><span class=o>=</span>gohugoio
</span></span></code></pre></td></tr></table></div></div><p>Hugo 建立静态网站的步骤和 Jekyll 很类似，都是 init -> write -> generate -> serve。可以跟着官网的 <a class=link href=https://gohugo.io/getting-started/quick-start/ target=_blank rel=noopener>Quick Start</a> 实践一下。</p><p>Hugo 的主题管理用的是 git submodule，并且在配置文件 <code>config.toml</code> 中设置 <code>theme = "[your theme]"</code>。顺便提一下 <a class=link href=https://toml.io/cn/ target=_blank rel=noopener>toml</a> 是一种与 json、yaml 类似的配置文件格式。（尽管我个人更喜欢yaml，因为 toml 的表必须写在最后面，让我很难受）</p><p>Hugo 的文章放在 <code>/content/post/</code> 下，写完后用 <code>hugo server -D</code> 来预览，地址是 <a class=link href=http://localhost:1313/ target=_blank rel=noopener>http://localhost:1313/</a>，预览是实时更新的。</p><p>Hugo 提供了迁移命令 <code>import</code>，可以将其他博客项目转换为 Hugo 项目，命令格式是 <code>hugo import jekyll JEKYLL_ROOT_PATH TARGET_PATH</code></p><h2 id=hugo开发>Hugo开发</h2><h3 id=hugo命令>Hugo命令</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>hugo new site <span class=o>[</span>site name<span class=o>]</span> <span class=c1># 新建一个 site name 网站</span>
</span></span><span class=line><span class=cl>hugo <span class=c1># 在 /public/ 文件夹中生成页面</span>
</span></span><span class=line><span class=cl>hugo server <span class=c1># 运行一个实时更新的服务器</span>
</span></span></code></pre></td></tr></table></div></div><p>以上两个命令可以和以下参数结合：</p><ul><li><code>-D</code>：生成草稿（Drafts）</li><li><code>-E</code>：生成过期文章（Expired）</li><li><code>-F</code>：生成未来文章（Future）</li></ul><h3 id=项目结构>项目结构</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>.
</span></span><span class=line><span class=cl>├── archetypes <span class=c1># 头信息模板</span>
</span></span><span class=line><span class=cl>├── config.toml <span class=c1># 配置文件</span>
</span></span><span class=line><span class=cl>├── content <span class=c1># 博文</span>
</span></span><span class=line><span class=cl>├── data <span class=c1># 数据</span>
</span></span><span class=line><span class=cl>├── layouts <span class=c1># 样式</span>
</span></span><span class=line><span class=cl>├── static <span class=c1># 静态文件</span>
</span></span><span class=line><span class=cl>└── themes <span class=c1># 主题</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=内容管理>内容管理</h3><h4 id=page-bundles>Page Bundles</h4><blockquote><p><a class=link href=https://gohugo.io/content-management/page-bundles/ target=_blank rel=noopener>官方文档</a></p></blockquote><p>Page Bundles 用于组织页面资源。Page Bundles 分为 Leaf Bundle 和 Branch Bundle。两者区别如下：</p><div class=table-wrapper><table><thead><tr><th></th><th>Leaf Bundle</th><th>Branch Bundle</th></tr></thead><tbody><tr><td>用法</td><td>单页内容和附件的集合</td><td>一系列内容的集合（比如 home page）</td></tr><tr><td>Index file name</td><td><code>index.md</code></td><td><code>_index.md</code></td></tr><tr><td>允许的资源</td><td>page 和 non-page（图片等）</td><td>non-page（图片等）</td></tr><tr><td>资源存放的位置</td><td>leaf bundle 文件夹内的任何文件夹</td><td>只能存放在 branch bundle 的文件夹，与 <code>_index.md</code> 同级</td></tr><tr><td>Layout 类型</td><td>single</td><td>list</td></tr><tr><td>示例</td><td><code>/content/posts/my-post/index.md</code></td><td><code>content/posts/_index.md</code></td></tr><tr><td>非index文件</td><td>Accessed only as page resources</td><td>Accessed only as regular pages</td></tr></tbody></table></div><p>简单来说，如果只是单篇博文，那么就用 Leaf Bundle；如果是多篇博文，那就用 Branch Bundle. 由于 <code>/content/</code> 本身就包含了所有的博文，所以它应该是 Branch Bundle（我们应该建立一个 <code>/content/_index.md</code>）。</p><p>以下是 Leaf Bundle 示例：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>content/
</span></span><span class=line><span class=cl>├── about
</span></span><span class=line><span class=cl>│   ├── index.md
</span></span><span class=line><span class=cl>├── posts
</span></span><span class=line><span class=cl>│   ├── my-post
</span></span><span class=line><span class=cl>│   │   ├── content1.md
</span></span><span class=line><span class=cl>│   │   ├── content2.md
</span></span><span class=line><span class=cl>│   │   ├── image1.jpg
</span></span><span class=line><span class=cl>│   │   ├── image2.png
</span></span><span class=line><span class=cl>│   │   └── index.md
</span></span><span class=line><span class=cl>│   └── my-other-post
</span></span><span class=line><span class=cl>│       └── index.md
</span></span><span class=line><span class=cl>│
</span></span><span class=line><span class=cl>└── another-section
</span></span><span class=line><span class=cl>    ├── ..
</span></span><span class=line><span class=cl>    └── not-a-leaf-bundle
</span></span><span class=line><span class=cl>        ├── ..
</span></span><span class=line><span class=cl>        └── another-leaf-bundle
</span></span><span class=line><span class=cl>            └── index.md
</span></span></code></pre></td></tr></table></div></div><p>以下是 Branch Bundle 示例：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>content/
</span></span><span class=line><span class=cl>├── branch-bundle-1
</span></span><span class=line><span class=cl>│   ├── branch-content1.md
</span></span><span class=line><span class=cl>│   ├── branch-content2.md
</span></span><span class=line><span class=cl>│   ├── image1.jpg
</span></span><span class=line><span class=cl>│   ├── image2.png
</span></span><span class=line><span class=cl>│   └── _index.md
</span></span><span class=line><span class=cl>└── branch-bundle-2
</span></span><span class=line><span class=cl>    ├── _index.md
</span></span><span class=line><span class=cl>    └── a-leaf-bundle
</span></span><span class=line><span class=cl>        └── index.md
</span></span></code></pre></td></tr></table></div></div><p>相比之下，Jekyll 是将博文放在 <code>_post</code>，而图片放在其他文件夹，这点就不太好，图片一多就容易乱。</p><h4 id=page-resources>Page Resources</h4><blockquote><p><a class=link href=https://gohugo.io/content-management/page-resources/ target=_blank rel=noopener>官方文档</a></p></blockquote><p>页面资源（图片、其他页面、文档等）可以通过 Page Bundle 访问，但不同 Page Bundle 的页面资源不互通。有三种方法可以获得页面资源：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// 通过文件类型
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>{{</span> <span class=p>.</span><span class=nx>Resources</span><span class=p>.</span><span class=nx>ByType</span> <span class=s>&#34;image&#34;</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl><span class=c1>// 通过文件名匹配，支持模糊匹配
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>{{</span> <span class=p>.</span><span class=nx>Resources</span><span class=p>.</span><span class=nx>Match</span> <span class=s>&#34;images/*&#34;</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl><span class=p>{{</span> <span class=p>.</span><span class=nx>Resources</span><span class=p>.</span><span class=nx>Match</span> <span class=s>&#34;**/sunset.jpg&#34;</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl><span class=c1>// 通过文件名匹配，但返回第一个匹配的文件
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>{{</span> <span class=p>.</span><span class=nx>Resources</span><span class=p>.</span><span class=nx>GetMatch</span> <span class=s>&#34;images/*&#34;</span> <span class=p>}}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=front-matter>Front Matter</h4><blockquote><p><a class=link href=https://gohugo.io/content-management/front-matter/ target=_blank rel=noopener>官方文档</a></p></blockquote><p>Hugo 的 Front Matter 和 Jekyll 一样也可以用 yaml。</p><p>以下是部分常用的预定义的 Front Matter 变量（除了这些之外也可以自定义变量）：</p><ul><li><p><code>date</code>：日期</p></li><li><p><code>expiryDate</code>：过期日期（过了过期日期文章就看不了）</p></li><li><p><code>publishDate</code>：出版日期（没到出版日期文章就看不了）</p></li><li><p><code>lastmod</code>：最后修改时间</p></li><li><p><code>draft</code>：是否是草稿。如果设置为 <code>true</code>，则不会生成页面。</p></li><li><p><code>title</code>：文章标题</p></li><li><p><code>type</code>：文章类型（如果没设置，则默认是文件夹名）</p></li><li><p><code>keyword</code>：文章关键字</p></li><li><p><code>description</code>：文章描述</p></li><li><p><code>images</code>：与文章相关的一组图片，用于 <a class=link href=https://gohugo.io/templates/internal target=_blank rel=noopener>Internal Templates</a></p></li><li><p><code>audio</code>：与文章相关的一组音频，用于 <a class=link href=https://gohugo.io/templates/internal target=_blank rel=noopener>Internal Templates</a></p></li><li><p><code>videos</code>：与文章相关的一组视频，用于 <a class=link href=https://gohugo.io/templates/internal target=_blank rel=noopener>Internal Templates</a></p></li><li><p><code>aliases</code>：替代地址（alias直译是别名），Hugo 会在替代地址处生成一个跳转网页，当访问替代地址时会跳转到原页面地址。<a class=link href=https://gohugo.io/content-management/urls/#aliases target=_blank rel=noopener>详情</a></p></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nn>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>aliases</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>/posts/my-original-url/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>/2010/01/01/even-earlier-url.html</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nn>---</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li><code>cascade</code>：一组会传递给子页面的变量（和 Jekyll 中的默认变量差不多），我们可以用 <code>_target</code> 为特定的子页面设置不同变量。<a class=link href=https://gohugo.io/content-management/front-matter/#front-matter-cascade target=_blank rel=noopener>详情</a>。</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>cascade</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>_target</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>page</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>lang</span><span class=p>:</span><span class=w> </span><span class=l>en</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>/blog/**</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>background</span><span class=p>:</span><span class=w> </span><span class=l>yosemite.jpg</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>_target</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>section</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>background</span><span class=p>:</span><span class=w> </span><span class=l>goldenbridge.jpg</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li><p><code>layout</code>：页面布局。如果没有的话，就采用与 section 名相同的 layout。更多请看 <a class=link href=https://gohugo.io/templates/lookup-order/ target=_blank rel=noopener>Hugo Layouts Lookup Rules</a></p></li><li><p><code>weight</code>：用于整理文章。必须是非 0 值，0 表示未设置 weight（默认的排序权重是：Weight > Date > LinkTitle > FilePath）</p></li><li><p><code>_build</code>：可以指定页面的 Build Options，有两个子变量 <code>list</code> 和 <code>render</code>，用法见 <a class=link href=https://gohugo.io/content-management/build-options/#illustrative-use-cases target=_blank rel=noopener>use cases</a></p></li></ul><h3 id=图像处理>图像处理</h3><blockquote><p><a class=link href=https://gohugo.io/content-management/image-processing/ target=_blank rel=noopener>官方文档</a></p></blockquote><p>得益于 go 自带的图像处理库，我们可以在文章内对文章进行处理，比如裁剪、滤镜、压缩、获取Exif信息（这个在相册中非常有用）</p><h3 id=archetypes>Archetypes</h3><blockquote><p><a class=link href=https://gohugo.io/content-management/archetypes/ target=_blank rel=noopener>官方文档</a></p></blockquote><p>Archetypes 中文是原型，当使用 <code>hugo new</code> 命令新建一个文章时，会使用 <code>archetypes</code> 中的文件来初始化文件，比如如果定义一个 <code>archetypes/newsletter.md</code>：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nn>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>title</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;{{ replace .Name &#34;</span>-<span class=s2>&#34; &#34;</span><span class=w> </span><span class=s2>&#34; | title }}&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>date</span><span class=p>:</span><span class=w> </span>{{<span class=w> </span><span class=l>.Date }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>draft</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nn>---</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>那么当在 <code>/content/newsletter/</code> 内用命令行新建文章时，就会自动填写 front matter（再也不同复制粘贴了）。</p><p>特殊的，hugo 支持将文件夹作为 archetype，用的时候要用 <code>hugo new --kind [文件夹]</code> 来指定。</p><h3 id=template>template</h3><blockquote><p><a class=link href=https://gohugo.io/templates/introduction/ target=_blank rel=noopener>官方文档</a></p></blockquote><p>Hugo 使用 Go 的 <a class=link href=https://pkg.go.dev/html/template target=_blank rel=noopener>html/template</a> 和 <a class=link href=https://pkg.go.dev/text/template target=_blank rel=noopener>text/template</a> 库作为模板的基础。</p><p>与 Liquid 一样，模板用两个花括号 <code>{{ }}</code> 包裹。如果要去除空格，可以用 <code>{{- -}}</code>，也可以只去除单边空格，比如：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=p>{{</span><span class=mi>23</span> <span class=o>-</span><span class=p>}}</span> <span class=p>&lt;</span> <span class=p>{{</span><span class=o>-</span> <span class=mi>45</span><span class=p>}}</span>
</span></span><span class=line><span class=cl><span class=c1>//output:
</span></span></span><span class=line><span class=cl><span class=c1>//23&lt;45
</span></span></span></code></pre></td></tr></table></div></div><h4 id=action>Action</h4><p>Action 介绍了一些语句，下面的 pipeline 可以看作 Liquid 里的过滤器（可以简单理解为变量、函数调用etc）。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=p>{{</span><span class=cm>/* a comment */</span><span class=p>}}</span>
</span></span><span class=line><span class=cl>    <span class=nx>注释</span><span class=err>，</span><span class=nx>执行时会忽略</span><span class=err>。</span><span class=nx>可以多行</span><span class=err>。</span><span class=nx>注释不能嵌套</span><span class=err>，</span><span class=nx>并且必须紧贴分界符始止</span><span class=err>，</span><span class=nx>就像这里表示的一样</span><span class=err>。</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>{{</span><span class=nx>pipeline</span><span class=p>}}</span>
</span></span><span class=line><span class=cl>    <span class=nx>pipeline的值的默认文本表示会被拷贝到输出里</span><span class=err>。</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl><span class=p>{{</span><span class=k>if</span> <span class=nx>pipeline</span><span class=p>}}</span> <span class=nx>T1</span> <span class=p>{{</span><span class=nx>end</span><span class=p>}}</span>
</span></span><span class=line><span class=cl>    <span class=nx>如果pipeline的值为empty</span><span class=err>，</span><span class=nx>不产生输出</span><span class=err>，</span><span class=nx>否则输出T1执行结果</span><span class=err>。</span><span class=nx>不改变dot的值</span><span class=err>。</span>
</span></span><span class=line><span class=cl>    <span class=nx>Empty值包括false</span><span class=err>、</span><span class=mi>0</span><span class=err>、</span><span class=nx>任意nil指针或者nil接口</span><span class=err>，</span><span class=nx>任意长度为0的数组</span><span class=err>、</span><span class=nx>切片</span><span class=err>、</span><span class=nx>字典</span><span class=err>。</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>{{</span><span class=k>if</span> <span class=nx>pipeline</span><span class=p>}}</span> <span class=nx>T1</span> <span class=p>{{</span><span class=k>else</span><span class=p>}}</span> <span class=nx>T0</span> <span class=p>{{</span><span class=nx>end</span><span class=p>}}</span>
</span></span><span class=line><span class=cl>    <span class=nx>如果pipeline的值为empty</span><span class=err>，</span><span class=nx>输出T0执行结果</span><span class=err>，</span><span class=nx>否则输出T1执行结果</span><span class=err>。</span><span class=nx>不改变dot的值</span><span class=err>。</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>{{</span><span class=k>if</span> <span class=nx>pipeline</span><span class=p>}}</span> <span class=nx>T1</span> <span class=p>{{</span><span class=k>else</span> <span class=k>if</span> <span class=nx>pipeline</span><span class=p>}}</span> <span class=nx>T0</span> <span class=p>{{</span><span class=nx>end</span><span class=p>}}</span>
</span></span><span class=line><span class=cl>    <span class=nx>用于简化if</span><span class=o>-</span><span class=nx>else链条</span><span class=err>，</span><span class=k>else</span> <span class=nx>action可以直接包含另一个if</span><span class=err>；</span><span class=nx>等价于</span><span class=err>：</span>
</span></span><span class=line><span class=cl>        <span class=p>{{</span><span class=k>if</span> <span class=nx>pipeline</span><span class=p>}}</span> <span class=nx>T1</span> <span class=p>{{</span><span class=k>else</span><span class=p>}}{{</span><span class=k>if</span> <span class=nx>pipeline</span><span class=p>}}</span> <span class=nx>T0</span> <span class=p>{{</span><span class=nx>end</span><span class=p>}}{{</span><span class=nx>end</span><span class=p>}}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>{{</span><span class=k>range</span> <span class=nx>pipeline</span><span class=p>}}</span> <span class=nx>T1</span> <span class=p>{{</span><span class=nx>end</span><span class=p>}}</span>
</span></span><span class=line><span class=cl>    <span class=nx>pipeline的值必须是数组</span><span class=err>、</span><span class=nx>切片</span><span class=err>、</span><span class=nx>字典或者通道</span><span class=err>。</span>
</span></span><span class=line><span class=cl>    <span class=nx>如果pipeline的值其长度为0</span><span class=err>，</span><span class=nx>不会有任何输出</span><span class=err>；</span>
</span></span><span class=line><span class=cl>    <span class=nx>否则dot遍历数组</span><span class=err>、</span><span class=nx>切片</span><span class=err>、</span><span class=nx>字典或者通道的每一个成员元素并执行T1</span><span class=err>；</span>
</span></span><span class=line><span class=cl>    <span class=nx>如果pipeline的值为字典</span><span class=err>，</span><span class=nx>且键可排序的基本类型</span><span class=err>，</span><span class=nx>元素也会按键的顺序排序</span><span class=err>。</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>{{</span><span class=k>range</span> <span class=nx>pipeline</span><span class=p>}}</span> <span class=nx>T1</span> <span class=p>{{</span><span class=k>else</span><span class=p>}}</span> <span class=nx>T0</span> <span class=p>{{</span><span class=nx>end</span><span class=p>}}</span>
</span></span><span class=line><span class=cl>    <span class=nx>pipeline的值必须是数组</span><span class=err>、</span><span class=nx>切片</span><span class=err>、</span><span class=nx>字典或者通道</span><span class=err>。</span>
</span></span><span class=line><span class=cl>    <span class=nx>如果pipeline的值其长度为0</span><span class=err>，</span><span class=nx>不改变dot的值并执行T0</span><span class=err>；</span><span class=nx>否则dot会遍历其中的元素并执行T1</span><span class=err>。</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>{{</span><span class=k>break</span><span class=p>}}</span>
</span></span><span class=line><span class=cl>    <span class=nx>提前结束</span><span class=p>{{</span><span class=k>range</span> <span class=nx>pipeline</span><span class=p>}}</span><span class=nx>的所有遍历</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>{{</span><span class=k>continue</span><span class=p>}}</span>
</span></span><span class=line><span class=cl>    <span class=nx>提前结束</span><span class=p>{{</span><span class=k>range</span> <span class=nx>pipeline</span><span class=p>}}</span><span class=nx>的当次遍历</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>{{</span><span class=nx>define</span> <span class=s>&#34;name&#34;</span><span class=p>}}</span> <span class=nx>T1</span> <span class=p>{{</span><span class=nx>end</span><span class=p>}}</span>
</span></span><span class=line><span class=cl>    <span class=nx>定义为name的模板</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>{{</span><span class=nx>template</span> <span class=s>&#34;name&#34;</span><span class=p>}}</span>
</span></span><span class=line><span class=cl>    <span class=nx>执行名为name的模板</span><span class=err>，</span><span class=nx>提供给模板的参数为nil</span><span class=err>，</span><span class=nx>如模板不存在输出为</span><span class=s>&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>{{</span><span class=nx>template</span> <span class=s>&#34;name&#34;</span> <span class=nx>pipeline</span><span class=p>}}</span>
</span></span><span class=line><span class=cl>    <span class=nx>执行名为name的模板</span><span class=err>，</span><span class=nx>提供给模板的参数为pipeline的值</span><span class=err>。</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>{{</span><span class=nx>block</span> <span class=s>&#34;name&#34;</span> <span class=nx>pipeline</span><span class=p>}}</span> <span class=nx>T1</span> <span class=p>{{</span><span class=nx>end</span><span class=p>}}</span>
</span></span><span class=line><span class=cl> <span class=nx>先定义一个名为name的模板</span><span class=err>，</span>
</span></span><span class=line><span class=cl>    <span class=p>{{</span><span class=nx>define</span> <span class=s>&#34;name&#34;</span><span class=p>}}</span> <span class=nx>T1</span> <span class=p>{{</span><span class=nx>end</span><span class=p>}}</span>
</span></span><span class=line><span class=cl> <span class=nx>再将pipeline作为参数</span><span class=err>，</span><span class=nx>执行该模板</span>
</span></span><span class=line><span class=cl>    <span class=p>{{</span><span class=nx>template</span> <span class=s>&#34;name&#34;</span> <span class=nx>pipeline</span><span class=p>}}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>{{</span><span class=nx>with</span> <span class=nx>pipeline</span><span class=p>}}</span> <span class=nx>T1</span> <span class=p>{{</span><span class=nx>end</span><span class=p>}}</span>
</span></span><span class=line><span class=cl>    <span class=nx>如果pipeline为empty不产生输出</span><span class=err>，</span><span class=nx>否则将dot设为pipeline的值并执行T1</span><span class=err>。</span><span class=nx>不修改外面的dot</span><span class=err>。</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>{{</span><span class=nx>with</span> <span class=nx>pipeline</span><span class=p>}}</span> <span class=nx>T1</span> <span class=p>{{</span><span class=k>else</span><span class=p>}}</span> <span class=nx>T0</span> <span class=p>{{</span><span class=nx>end</span><span class=p>}}</span>
</span></span><span class=line><span class=cl>    <span class=nx>如果pipeline为empty</span><span class=err>，</span><span class=nx>不改变dot并执行T0</span><span class=err>，</span><span class=nx>否则dot设为pipeline的值并执行T1</span><span class=err>。</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=arguments>Arguments</h4><p>参数代表一个简单的，由下面的某一条表示的值：</p><ul><li>go语法的布尔值、字符串、字符、整数、浮点数、虚数、复数，视为无类型字面常数，字符串不能跨行</li><li>关键字nil，代表一个go的无类型的nil值</li><li>字符&rsquo;.&rsquo;（句点，用时不加单引号），代表dot的值</li><li>变量名，以美元符号起始加上（可为空的）字母和数字构成的字符串，如：$piOver2和$；
执行结果为变量的值，变量参见下面的介绍</li><li>结构体数据的字段名，以句点起始，如：.Field；
执行结果为字段的值，支持链式调用：.Field1.Field2；
字段也可以在变量上使用（包括链式调用）：$x.Field1.Field2；</li><li>字典类型数据的键名；以句点起始，如：.Key；
执行结果是该键在字典中对应的成员元素的值；
键也可以和字段配合做链式调用，深度不限：.Field1.Key1.Field2.Key2；
虽然键也必须是字母和数字构成的标识字符串，但不需要以大写字母起始；
键也可以用于变量（包括链式调用）：$x.key1.key2；</li><li>数据的无参数方法名，以句点为起始，如：.Method；
执行结果为dot调用该方法的返回值，dot.Method()；
该方法必须有1到2个返回值，如果有2个则后一个必须是error接口类型；
如果有2个返回值的方法返回的error非nil，模板执行会中断并返回给调用模板执行者该错误；
方法可和字段、键配合做链式调用，深度不限：.Field1.Key1.Method1.Field2.Key2.Method2；
方法也可以在变量上使用（包括链式调用）：$x.Method1.Field；</li><li>无参数的函数名，如：fun；
执行结果是调用该函数的返回值fun()；对返回值的要求和方法一样；函数和函数名细节参见后面。</li><li>上面某一条的实例加上括弧（用于分组）
执行结果可以访问其字段或者键对应的值：
print (.F1 arg1) (.F2 arg2)
(.StructValuedMethod &ldquo;arg&rdquo;).Field</li></ul><h4 id=pipeline>Pipeline</h4><p>Pipeline是一个（可能是链状的）command序列。Command可以是一个简单值（argument）或者对函数或者方法的（可以有多个参数的）调用：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=nx>Argument</span>
</span></span><span class=line><span class=cl>    <span class=nx>执行结果是argument的执行结果</span>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nx>Method</span> <span class=p>[</span><span class=nx>Argument</span><span class=o>...</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=nx>方法可以独立调用或者位于链式调用的末端</span><span class=err>，</span><span class=nx>不同于链式调用中间的方法</span><span class=err>，</span><span class=nx>可以使用参数</span><span class=err>；</span>
</span></span><span class=line><span class=cl>    <span class=nx>执行结果是使用给出的参数调用该方法的返回值</span><span class=err>：</span><span class=nx>dot</span><span class=p>.</span><span class=nf>Method</span><span class=p>(</span><span class=nx>Argument1</span><span class=p>,</span> <span class=nx>etc</span><span class=p>.)</span><span class=err>；</span>
</span></span><span class=line><span class=cl><span class=nx>functionName</span> <span class=p>[</span><span class=nx>Argument</span><span class=o>...</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=nx>执行结果是使用给定的参数调用函数名指定的函数的返回值</span><span class=err>：</span><span class=nf>function</span><span class=p>(</span><span class=nx>Argument1</span><span class=p>,</span> <span class=nx>etc</span><span class=p>.)</span><span class=err>；</span>
</span></span></code></pre></td></tr></table></div></div><p>pipeline可以链式执行，用管道符 <code>|</code> 隔开（与 Liquid 一样）在一个链式的pipeline里，每个command的结果都作为下一个command的最后一个参数。pipeline最后一个command的输出作为整个管道执行的结果。</p><h4 id=variables>Variables</h4><p>Action里可以初始化一个变量来捕获管道的执行结果。变量无论是定义还是使用时都要在前面加 <code>$</code>。变量初始化语法如下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=err>$</span><span class=nx>variable</span> <span class=o>:=</span> <span class=nx>pipeline</span>
</span></span></code></pre></td></tr></table></div></div><p>变量可以重新赋值：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=err>$</span><span class=nx>variable</span> <span class=p>=</span> <span class=nx>pipeline</span>
</span></span></code></pre></td></tr></table></div></div><p>如果"range" action初始化了1个变量，该变量设置为迭代器的每一个成员元素，如果初始化了逗号分隔的2个变量：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=k>range</span> <span class=err>$</span><span class=nx>index</span><span class=p>,</span> <span class=err>$</span><span class=nx>element</span> <span class=o>:=</span> <span class=nx>pipeline</span>
</span></span></code></pre></td></tr></table></div></div><p>这时，$index和$element分别设置为数组/切片的索引或者字典的键，以及对应的成员元素。注意这和go range从句只有一个参数时设置为索引/键不同！</p><p>一个变量的作用域只到声明它的控制结构（&ldquo;if&rdquo;、&ldquo;with&rdquo;、&ldquo;range&rdquo;）的"end"为止，如果不是在控制结构里声明会直到模板结束为止。子模板的调用不会从调用它的位置（作用域）继承变量。</p><p>模板开始执行时，$会设置为传递给Execute方法的参数，就是说，dot的初始值。</p><h4 id=functions>Functions</h4><p>预定义的全局函数：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>and
</span></span><span class=line><span class=cl>    函数返回它的第一个empty参数或者最后一个参数；
</span></span><span class=line><span class=cl>    就是说&#34;and x y&#34;等价于&#34;if x then y else x&#34;；所有参数都会执行；
</span></span><span class=line><span class=cl>or
</span></span><span class=line><span class=cl>    返回第一个非empty参数或者最后一个参数；
</span></span><span class=line><span class=cl>    亦即&#34;or x y&#34;等价于&#34;if x then x else y&#34;；所有参数都会执行；
</span></span><span class=line><span class=cl>not
</span></span><span class=line><span class=cl>    返回它的单个参数的布尔值的否定
</span></span><span class=line><span class=cl>len
</span></span><span class=line><span class=cl>    返回它的参数的整数类型长度
</span></span><span class=line><span class=cl>index
</span></span><span class=line><span class=cl>    执行结果为第一个参数以剩下的参数为索引/键指向的值；
</span></span><span class=line><span class=cl>    如&#34;index x 1 2 3&#34;返回x[1][2][3]的值；每个被索引的主体必须是数组、切片或者字典。
</span></span><span class=line><span class=cl>print
</span></span><span class=line><span class=cl>    即fmt.Sprint
</span></span><span class=line><span class=cl>printf
</span></span><span class=line><span class=cl>    即fmt.Sprintf
</span></span><span class=line><span class=cl>println
</span></span><span class=line><span class=cl>    即fmt.Sprintln
</span></span><span class=line><span class=cl>html
</span></span><span class=line><span class=cl>    返回其参数文本表示的HTML逸码等价表示。
</span></span><span class=line><span class=cl>urlquery
</span></span><span class=line><span class=cl>    返回其参数文本表示的可嵌入URL查询的逸码等价表示。
</span></span><span class=line><span class=cl>js
</span></span><span class=line><span class=cl>    返回其参数文本表示的JavaScript逸码等价表示。
</span></span><span class=line><span class=cl>call
</span></span><span class=line><span class=cl>    执行结果是调用第一个参数的返回值，该参数必须是函数类型，其余参数作为调用该函数的参数；
</span></span><span class=line><span class=cl>    如&#34;call .X.Y 1 2&#34;等价于go语言里的dot.X.Y(1, 2)；
</span></span><span class=line><span class=cl>    其中Y是函数类型的字段或者字典的值，或者其他类似情况；
</span></span><span class=line><span class=cl>    call的第一个参数的执行结果必须是函数类型的值（和预定义函数如print明显不同）；
</span></span><span class=line><span class=cl>    该函数类型值必须有1到2个返回值，如果有2个则后一个必须是error接口类型；
</span></span><span class=line><span class=cl>    如果有2个返回值的方法返回的error非nil，模板执行会中断并返回给调用模板执行者该错误；
</span></span></code></pre></td></tr></table></div></div><p>二元比较运算也被定义为函数：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>eq      如果arg1 == arg2则返回真
</span></span><span class=line><span class=cl>ne      如果arg1 != arg2则返回真
</span></span><span class=line><span class=cl>lt      如果arg1 &lt; arg2则返回真
</span></span><span class=line><span class=cl>le      如果arg1 &lt;= arg2则返回真
</span></span><span class=line><span class=cl>gt      如果arg1 &gt; arg2则返回真
</span></span><span class=line><span class=cl>ge      如果arg1 &gt;= arg2则返回真
</span></span></code></pre></td></tr></table></div></div><p>为了简化多参数相等检测，eq（只有eq）可以接受2个或更多个参数，它会将第一个参数和其余参数依次比较，返回下式的结果：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=nx>arg1</span><span class=o>==</span><span class=nx>arg2</span> <span class=o>||</span> <span class=nx>arg1</span><span class=o>==</span><span class=nx>arg3</span> <span class=o>||</span> <span class=nx>arg1</span><span class=o>==</span><span class=nx>arg4</span> <span class=o>...</span>
</span></span></code></pre></td></tr></table></div></div><p>（和go的||不一样，不做惰性运算，所有参数都会执行）</p><p>更多 function 请参考 <a class=link href=https://gohugo.io/categories/functions target=_blank rel=noopener>functions | Hugo</a></p><h4 id=常用语句>常用语句</h4><p>拼接字符串</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>//to get a output like $b$c
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=err>$</span><span class=nx>a</span> <span class=o>:=</span> <span class=nx>printf</span> <span class=s>&#34;%s%s&#34;</span> <span class=err>$</span><span class=nx>b</span> <span class=err>$</span><span class=nx>c</span>
</span></span><span class=line><span class=cl><span class=c1>//or
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=err>$</span><span class=nx>a</span> <span class=o>:=</span> <span class=nx>printf</span> <span class=s>&#34;%s&#34;</span> <span class=err>$</span><span class=nx>c</span> <span class=p>|</span> <span class=nx>printf</span> <span class=s>&#34;%s%s&#34;</span> <span class=err>$</span><span class=nx>b</span> <span class=p>|</span> <span class=nx>printf</span> <span class=s>&#34;%s&#34;</span>
</span></span></code></pre></td></tr></table></div></div></section><footer class=article-footer><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><footer class=site-footer><section class=copyright>&copy;
2020 -
2022 Todd's Blog</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>主题 <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.12.0>Stack</a></b> 由 <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> 设计</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">目录</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#hugo入门>Hugo入门</a></li><li><a href=#hugo开发>Hugo开发</a><ol><li><a href=#hugo命令>Hugo命令</a></li><li><a href=#项目结构>项目结构</a></li><li><a href=#内容管理>内容管理</a><ol><li><a href=#page-bundles>Page Bundles</a></li><li><a href=#page-resources>Page Resources</a></li><li><a href=#front-matter>Front Matter</a></li></ol></li><li><a href=#图像处理>图像处理</a></li><li><a href=#archetypes>Archetypes</a></li><li><a href=#template>template</a><ol><li><a href=#action>Action</a></li><li><a href=#arguments>Arguments</a></li><li><a href=#pipeline>Pipeline</a></li><li><a href=#variables>Variables</a></li><li><a href=#functions>Functions</a></li><li><a href=#常用语句>常用语句</a></li></ol></li></ol></li></ol></nav></div></section></aside></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>